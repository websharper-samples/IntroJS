function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR;a=self;b=a.Samples=a.Samples||{};c=b.HelloWorld=b.HelloWorld||{};d=a.WebSharper=a.WebSharper||{};e=d.Obj=d.Obj||{};f=d.UI=d.UI||{};g=f.Var$1=f.Var$1||{};h=d.Operators=d.Operators||{};i=f.Templating=f.Templating||{};j=i.Runtime=i.Runtime||{};k=j.Server=j.Server||{};l=k.TemplateInstance=k.TemplateInstance||{};m=d.Arrays=d.Arrays||{};n=k.ProviderBuilder=k.ProviderBuilder||{};o=f.ListModel=f.ListModel||{};p=k.Handler=k.Handler||{};q=a.IntroJS_Templates=a.IntroJS_Templates||{};r=f.Var=f.Var||{};s=f.ConcreteVar=f.ConcreteVar||{};t=f.Snap=f.Snap||{};u=d.Collections=d.Collections||{};v=u.List=u.List||{};w=d.Unchecked=d.Unchecked||{};x=a.System=a.System||{};y=x.Guid=x.Guid||{};z=a.StartupCode$IntroJS$Client=a.StartupCode$IntroJS$Client||{};A=u.Dictionary=u.Dictionary||{};B=u.HashSet=u.HashSet||{};C=j.Client=j.Client||{};D=d.Seq=d.Seq||{};E=f.Client=f.Client||{};F=E.Templates=E.Templates||{};G=f.Doc=f.Doc||{};H=d.JavaScript=d.JavaScript||{};I=H.Pervasives=H.Pervasives||{};J=f.Abbrev=f.Abbrev||{};K=J.Fresh=J.Fresh||{};L=a.Object;M=f.View=f.View||{};N=f.AttrProxy=f.AttrProxy||{};O=f.CheckedInput=f.CheckedInput||{};P=d.Numeric=d.Numeric||{};Q=u.DictionaryUtil=u.DictionaryUtil||{};R=d.Enumerator=d.Enumerator||{};S=R.T=R.T||{};T=a.EventTarget;U=a.Node;V=H.JS=H.JS||{};W=f.DomUtility=f.DomUtility||{};X=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};Y=a.WindowOrWorkerGlobalScope;Z=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};_0=f.Docs=f.Docs||{};_1=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_2=f.DocElemNode=f.DocElemNode||{};_3=a.CharacterData;_4=f.Storage=f.Storage||{};_5=F.Prepare=F.Prepare||{};_6=d.Slice=d.Slice||{};_7=u.KeyCollection=u.KeyCollection||{};_8=f.An=f.An||{};_9=E.Settings=E.Settings||{};_=J.Mailbox=J.Mailbox||{};$=u.HashSetUtil=u.HashSetUtil||{};ba=E.Attrs=E.Attrs||{};bb=ba.Dyn=ba.Dyn||{};bc=f.Array=f.Array||{};bd=_4.ArrayStorage=_4.ArrayStorage||{};be=f.Elt=f.Elt||{};bf=d.Strings=d.Strings||{};bg=E.Docs=E.Docs||{};bh=bg.RunState=bg.RunState||{};bi=bg.NodeSet=bg.NodeSet||{};bj=f.Anims=f.Anims||{};bk=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bl=d.List=d.List||{};bm=bl.T=bl.T||{};bn=f.Attrs=f.Attrs||{};bo=f.AttrModule=f.AttrModule||{};bp=f.Updates=f.Updates||{};bq=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};br=d.Concurrency=d.Concurrency||{};bs=f.AppendList=f.AppendList||{};bt=f.String=f.String||{};bu=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bv=f.Easing=f.Easing||{};bw=br.AsyncBody=br.AsyncBody||{};bx=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};by=br.CT=br.CT||{};bz=J.HashSet=J.HashSet||{};bA=d.Char=d.Char||{};bB=f.DynamicAttrNode=f.DynamicAttrNode||{};bC=br.Scheduler=br.Scheduler||{};bD=d.CancellationTokenSource=d.CancellationTokenSource||{};bE=bg.DomNodes=bg.DomNodes||{};bF=d.Queue=d.Queue||{};bG=a.Error;bH=d.OperationCanceledException=d.OperationCanceledException||{};bI=d.Lazy=d.Lazy||{};bJ=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bK=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};bL=bK.LazyRecord=bK.LazyRecord||{};bM=a.IntelliFactory;bN=bM&&bM.Runtime;bO=a.jQuery;bP=a.console;bQ=a.Math;bR=a.Date;c.Main=function(){var bS,bT,bU,bV,bW,bX,bY,bZ;bS=g.Create$1("");bT=(bU=(bV=(bW=(bX=G.Convert(function(b0){var b1,b2,b3;return(b1=n.Make().WithHole({$:1,$0:"name",$1:b0}),(b2=p.CompleteHoles(b1.k,b1.h,[]),(b3=new l.New(b2[1],q.listitem(b2[0])),(b1.i=b3,b3)))).get_Doc();},c.People().v),n.Make().WithHole({$:0,$0:"listcontainer",$1:bX})).WithHole({$:8,$0:"name",$1:bS}),bW.WithHole(p.EventQ2(bW.k,"add",function(){return bW.i;},function(){c.People().Append(bS.Get());bS.Set("");}))),bV.WithHole(p.EventQ2(bV.k,"intro",function(){return bV.i;},function(){(new a.introJs()).start();}))),(bY=p.CompleteHoles(bU.k,bU.h,[["name",0]]),(bZ=new l.New(bY[1],q.main(bY[0])),(bU.i=bZ,bZ)))).get_Doc();F.LoadLocalTemplates("");G.RunById("main",bT);};c.People=function(){z.$cctor();return z.People;};e=d.Obj=bN.Class({Equals:function(bS){return this===bS;},GetHashCode:function(){return -1;}},null,e);e.New=bN.Ctor(function(){},e);g=f.Var$1=bN.Class({},e,g);g.Create$1=function(bS){return new s.New(false,t.New({$:2,$0:bS,$1:[]}),bS);};h.FailWith=function(bS){throw new bG(bS);};h.KeyValue=function(bS){return[bS.K,bS.V];};l=k.TemplateInstance=bN.Class({get_Doc:function(){return this.doc;}},e,l);l.New=bN.Ctor(function(bS,bT){e.New.call(this);this.doc=bT;this.allVars=bS.$==0?bS.$0:h.FailWith("Should not happen");},l);m.get=function(bS,bT){m.checkBounds(bS,bT);return bS[bT];};m.checkBounds=function(bS,bT){if(bT<0||bT>=bS.length)h.FailWith("Index was outside the bounds of the array.");};m.length=function(bS){return bS.dims===2?bS.length*bS.length:bS.length;};m.set=function(bS,bT,bU){m.checkBounds(bS,bT);bS[bT]=bU;};n=k.ProviderBuilder=bN.Class({WithHole:function(bS){this.h.push(bS);return this;}},null,n);n.Make=function(){var bS;return n.New(null,(bS=y.NewGuid(),a.String(bS)),[]);};n.New=function(bS,bT,bU){return new n({i:bS,k:bT,h:bU});};o=f.ListModel=bN.Class({Append:function(bS){var bT,bU,bV,bW;bT=this;bU=this["var"].Get();bV=this.key(bS);bW=m.tryFindIndex(function(bX){return w.Equals(bT.key(bX),bV);},bU);bW!=null&&bW.$==1?this["var"].Set(this.storage.SSetAt(bW.$0,bS,bU)):this["var"].Set(this.storage.SAppend(bS,bU));this.ObsoleteKey(bV);},ObsoleteKey:function(bS){var bT,bU;bT=(bU=null,[this.it.TryGetValue(bS,{get:function(){return bU;},set:function(bV){bU=bV;}}),bU]);bT[0]?(t.Obsolete(bT[1]),this.it.Remove(bS)):void 0;},GetEnumerator:function(){return R.Get(this["var"].Get());},GetEnumerator0:function(){return R.Get0(this["var"].Get());}},e,o);o.New=bN.Ctor(function(bS,bT){o.New$3.call(this,bS,g.Create$1(m.ofSeq(D.distinctBy(bS,bT.SInit()))),bT);},o);o.New$3=bN.Ctor(function(bS,bT,bU){e.New.call(this);this.key=bS;this["var"]=bT;this.storage=bU;this.v=M.Map(function(bV){return bV.slice();},this["var"].get_View());this.it=new A.New$5();},o);p.CompleteHoles=function(bS,bT,bU){var bW,bX,bY,bZ,b0,b1;function bV(b2,b3){var b4,b5,b6,b7;return bX.Contains(b2)?null:(b4=b3===0?(b5=g.Create$1(""),[{$:8,$0:b2,$1:b5},b5]):b3===1?(b6=g.Create$1(0),[{$:13,$0:b2,$1:b6},b6]):b3===2?(b7=g.Create$1(false),[{$:9,$0:b2,$1:b7},b7]):h.FailWith("Invalid value type"),(bW.set_Item(b2,b4[1]),{$:1,$0:b4[0]}));}bW=new A.New$5();bX=new B.New$3();bY=R.Get(bT);try{while(bY.MoveNext()){bZ=bY.Current();(bZ.$==8?(b0=[bZ.$0,C.Box(bZ.$1)],true):bZ.$==11?(b0=[bZ.$0,C.Box(bZ.$1)],true):bZ.$==10?(b0=[bZ.$0,C.Box(bZ.$1)],true):bZ.$==13?(b0=[bZ.$0,C.Box(bZ.$1)],true):bZ.$==12?(b0=[bZ.$0,C.Box(bZ.$1)],true):bZ.$==9&&(b0=[bZ.$0,C.Box(bZ.$1)],true))?(b1=b0[0],bX.Add(b1),bW.set_Item(b1,b0[1])):void 0;}}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}return[D.append(bT,m.choose(function(b2){return bV(b2[0],b2[1]);},bU)),{$:0,$0:bW}];};p.EventQ2=function(bS,bT,bU,bV){return{$:5,$0:bT,$1:true,$2:function(bW){return function(bX){return bV({Vars:bU(),Target:bW,Event:bX});};}};};q.listitem=function(bS){return bS?F.GetOrLoadTemplate("index",{$:1,$0:"listitem"},function(){return bO.parseHTML("<li>${Name}</li>");},bS):F.PrepareTemplate("index",{$:1,$0:"listitem"},function(){return bO.parseHTML("<li>${Name}</li>");});};q.main=function(bS){return bS?F.GetOrLoadTemplate("index",{$:1,$0:"main"},function(){return bO.parseHTML("\n        <ul ws-hole=\"ListContainer\" data-step=\"1\" data-intro=\"This is the list.\">\n            \n        </ul>\n        <div data-step=\"2\" data-intro=\"Here add a new element.\">\n            <input ws-var=\"Name\" placeholder=\"Name\" data-step=\"3\" data-intro=\"Type in a new name to add to the list.\">\n            <button ws-onclick=\"Add\" data-step=\"5\" data-intro=\"Click the button to add the element.\">Add</button>\n            <div data-step=\"4\" data-intro=\"Here it shows the input in real time.\">You are about to add: ${Name}</div>\n            <button ws-onclick=\"Intro\">Intro</button>\n        </div>\n    ");},bS):F.PrepareTemplate("index",{$:1,$0:"main"},function(){return bO.parseHTML("\n        <ul ws-hole=\"ListContainer\" data-step=\"1\" data-intro=\"This is the list.\">\n            \n        </ul>\n        <div data-step=\"2\" data-intro=\"Here add a new element.\">\n            <input ws-var=\"Name\" placeholder=\"Name\" data-step=\"3\" data-intro=\"Type in a new name to add to the list.\">\n            <button ws-onclick=\"Add\" data-step=\"5\" data-intro=\"Click the button to add the element.\">Add</button>\n            <div data-step=\"4\" data-intro=\"Here it shows the input in real time.\">You are about to add: ${Name}</div>\n            <button ws-onclick=\"Intro\">Intro</button>\n        </div>\n    ");});};r=f.Var=bN.Class({},e,r);r.New=bN.Ctor(function(){e.New.call(this);},r);s=f.ConcreteVar=bN.Class({Get:function(){return this.current;},Set:function(bS){if(this.isConst)(function(bT){return bT("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bT){bP.log(bT);}));else{t.Obsolete(this.snap);this.current=bS;this.snap=t.New({$:2,$0:bS,$1:[]});}},get_View:function(){return this.view;},UpdateMaybe:function(bS){var bT;bT=bS(this.Get());bT!=null&&bT.$==1?this.Set(bT.$0):void 0;}},r,s);s.New=bN.Ctor(function(bS,bT,bU){var bV;bV=this;r.New.call(this);this.isConst=bS;this.current=bU;this.snap=bT;this.view=function(){return bV.snap;};this.id=K.Int();},s);t.Map=function(bS,bT){var bU,bV;bU=bT.s;return bU!=null&&bU.$==0?t.New({$:0,$0:bS(bU.$0)}):(bV=t.New({$:3,$0:[],$1:[]}),(t.When(bT,function(bW){t.MarkDone(bV,bT,bS(bW));},bV),bV));};t.WhenRun=function(bS,bT,bU){var bV;bV=bS.s;bV==null?bU():bV!=null&&bV.$==2?(bV.$1.push(bU),bT(bV.$0)):bV!=null&&bV.$==3?(bV.$0.push(bT),bV.$1.push(bU)):bT(bV.$0);};t.WhenObsoleteRun=function(bS,bT){var bU;bU=bS.s;bU==null?bT():bU!=null&&bU.$==2?bU.$1.push(bT):bU!=null&&bU.$==3?bU.$1.push(bT):void 0;};t.When=function(bS,bT,bU){var bV;bV=bS.s;bV==null?t.Obsolete(bU):bV!=null&&bV.$==2?(t.EnqueueSafe(bV.$1,bU),bT(bV.$0)):bV!=null&&bV.$==3?(bV.$0.push(bT),t.EnqueueSafe(bV.$1,bU)):bT(bV.$0);};t.MarkDone=function(bS,bT,bU){var bV;if(bV=bT.s,bV!=null&&bV.$==0)t.MarkForever(bS,bU);else t.MarkReady(bS,bU);};t.EnqueueSafe=function(bS,bT){var bU,bV,bW,bX;bS.push(bT);if(bS.length%20===0){bU=bS.slice(0);bF.Clear(bS);for(bV=0,bW=m.length(bU)-1;bV<=bW;bV++){bX=m.get(bU,bV);typeof bX=="object"?function(bY){if(bY.s)bS.push(bY);}(bX):function(bY){bS.push(bY);}(bX);}}else void 0;};t.MarkForever=function(bS,bT){var bU,bV,bW,bX;bU=bS.s;if(bU!=null&&bU.$==3){bS.s={$:0,$0:bT};bV=bU.$0;for(bW=0,bX=m.length(bV)-1;bW<=bX;bW++)(m.get(bV,bW))(bT);}else void 0;};t.MarkReady=function(bS,bT){var bU,bV,bW,bX;bU=bS.s;if(bU!=null&&bU.$==3){bS.s={$:2,$0:bT,$1:bU.$1};bV=bU.$0;for(bW=0,bX=m.length(bV)-1;bW<=bX;bW++)(m.get(bV,bW))(bT);}else void 0;};t.Map2Unit=function(bS,bT){var bU,bV,bW;function bX(){var bY,bZ,b0;if(!(bY=bW.s,bY!=null&&bY.$==0||bY!=null&&bY.$==2)){bZ=t.ValueAndForever(bS);b0=t.ValueAndForever(bT);bZ!=null&&bZ.$==1?b0!=null&&b0.$==1?bZ.$0[1]&&b0.$0[1]?t.MarkForever(bW,null):t.MarkReady(bW,null):void 0:void 0;}}bU=bS.s;bV=bT.s;return bU!=null&&bU.$==0?bV!=null&&bV.$==0?t.New({$:0,$0:null}):bT:bV!=null&&bV.$==0?bS:(bW=t.New({$:3,$0:[],$1:[]}),(t.When(bS,bX,bW),t.When(bT,bX,bW),bW));};t.Join=function(bS){var bT;bT=t.New({$:3,$0:[],$1:[]});t.When(bS,function(bU){var bV;bV=bU();t.When(bV,function(bW){var bX,bY;if((bX=bV.s,bX!=null&&bX.$==0)&&(bY=bS.s,bY!=null&&bY.$==0))t.MarkForever(bT,bW);else t.MarkReady(bT,bW);},bT);},bT);return bT;};t.Map3=function(bS,bT,bU,bV){var bW,bX,bY,bZ;function b0(b1){var b2,b3,b4,b5;if(!(b2=bZ.s,b2!=null&&b2.$==0||b2!=null&&b2.$==2)){b3=t.ValueAndForever(bT);b4=t.ValueAndForever(bU);b5=t.ValueAndForever(bV);b3!=null&&b3.$==1?b4!=null&&b4.$==1?b5!=null&&b5.$==1?b3.$0[1]&&b4.$0[1]&&b5.$0[1]?t.MarkForever(bZ,bS(b3.$0[0],b4.$0[0],b5.$0[0])):t.MarkReady(bZ,bS(b3.$0[0],b4.$0[0],b5.$0[0])):void 0:void 0:void 0;}}bW=bT.s;bX=bU.s;bY=bV.s;return bW!=null&&bW.$==0?bX!=null&&bX.$==0?bY!=null&&bY.$==0?t.New({$:0,$0:bS(bW.$0,bX.$0,bY.$0)}):t.Map3Opt1(bS,bW.$0,bX.$0,bV):bY!=null&&bY.$==0?t.Map3Opt2(bS,bW.$0,bY.$0,bU):t.Map3Opt3(bS,bW.$0,bU,bV):bX!=null&&bX.$==0?bY!=null&&bY.$==0?t.Map3Opt4(bS,bX.$0,bY.$0,bT):t.Map3Opt5(bS,bX.$0,bT,bV):bY!=null&&bY.$==0?t.Map3Opt6(bS,bY.$0,bT,bU):(bZ=t.New({$:3,$0:[],$1:[]}),(t.When(bT,b0,bZ),t.When(bU,b0,bZ),t.When(bV,b0,bZ),bZ));};t.Sequence=function(bS){var bT,bU,bV;function bW(bX){var bY;if(bV[0]===0){bY=m.map(function(bZ){var b0;b0=bZ.s;return b0!=null&&b0.$==0?b0.$0:b0!=null&&b0.$==2?b0.$0:h.FailWith("value not found by View.Sequence");},bT);m.forall(function(bZ){var b0;b0=bZ.s;return b0!=null&&b0.$==0;},bT)?t.MarkForever(bU,bY):t.MarkReady(bU,bY);}else bV[0]--;}bT=m.ofSeq(bS);return bT.length==0?t.New({$:0,$0:[]}):(bU=t.New({$:3,$0:[],$1:[]}),(bV=[m.length(bT)-1],(m.iter(function(bX){t.When(bX,bW,bU);},bT),bU)));};t.Map2=function(bS,bT,bU){var bV,bW,bX;function bY(bZ){var b0,b1,b2;if(!(b0=bX.s,b0!=null&&b0.$==0||b0!=null&&b0.$==2)){b1=t.ValueAndForever(bT);b2=t.ValueAndForever(bU);b1!=null&&b1.$==1?b2!=null&&b2.$==1?b1.$0[1]&&b2.$0[1]?t.MarkForever(bX,bS(b1.$0[0],b2.$0[0])):t.MarkReady(bX,bS(b1.$0[0],b2.$0[0])):void 0:void 0;}}bV=bT.s;bW=bU.s;return bV!=null&&bV.$==0?bW!=null&&bW.$==0?t.New({$:0,$0:bS(bV.$0,bW.$0)}):t.Map2Opt1(bS,bV.$0,bU):bW!=null&&bW.$==0?t.Map2Opt2(bS,bW.$0,bT):(bX=t.New({$:3,$0:[],$1:[]}),(t.When(bT,bY,bX),t.When(bU,bY,bX),bX));};t.Copy=function(bS){var bT,bU,bV;bT=bS.s;return bT==null?bS:bT!=null&&bT.$==2?(bU=t.New({$:2,$0:bT.$0,$1:[]}),(t.WhenObsolete(bS,bU),bU)):bT!=null&&bT.$==3?(bV=t.New({$:3,$0:[],$1:[]}),(t.When(bS,function(bW){t.MarkDone(bV,bS,bW);},bV),bV)):bS;};t.ValueAndForever=function(bS){var bT;bT=bS.s;return bT!=null&&bT.$==0?{$:1,$0:[bT.$0,true]}:bT!=null&&bT.$==2?{$:1,$0:[bT.$0,false]}:null;};t.Map3Opt1=function(bS,bT,bU,bV){return t.Map(function(bW){return bS(bT,bU,bW);},bV);};t.Map3Opt2=function(bS,bT,bU,bV){return t.Map(function(bW){return bS(bT,bW,bU);},bV);};t.Map3Opt3=function(bS,bT,bU,bV){return t.Map2(function(bW,bX){return bS(bT,bW,bX);},bU,bV);};t.Map3Opt4=function(bS,bT,bU,bV){return t.Map(function(bW){return bS(bW,bT,bU);},bV);};t.Map3Opt5=function(bS,bT,bU,bV){return t.Map2(function(bW,bX){return bS(bW,bT,bX);},bU,bV);};t.Map3Opt6=function(bS,bT,bU,bV){return t.Map2(function(bW,bX){return bS(bW,bX,bT);},bU,bV);};t.Map2Opt1=function(bS,bT,bU){return t.Map(function(bV){return bS(bT,bV);},bU);};t.Map2Opt2=function(bS,bT,bU){return t.Map(function(bV){return bS(bV,bT);},bU);};t.WhenObsolete=function(bS,bT){var bU;bU=bS.s;bU==null?t.Obsolete(bT):bU!=null&&bU.$==2?t.EnqueueSafe(bU.$1,bT):bU!=null&&bU.$==3?t.EnqueueSafe(bU.$1,bT):void 0;};v=u.List=bN.Class({GetEnumerator:function(){return R.Get(this);},GetEnumerator0:function(){return R.Get0(this);}},null,v);w.Equals=function(bS,bT){var bU,bV,bW,bX;if(bS===bT)return true;else{bU=typeof bS;if(bU=="object"){if(bS===null||bS===void 0||bT===null||bT===void 0)return false;else if("Equals"in bS)return bS.Equals(bT);else if(bS instanceof a.Array&&bT instanceof a.Array)return w.arrayEquals(bS,bT);else if(bS instanceof a.Date&&bT instanceof a.Date)return w.dateEquals(bS,bT);else{bV=[true];for(var bY in bS)if(function(bZ){bV[0]=!bS.hasOwnProperty(bZ)||bT.hasOwnProperty(bZ)&&w.Equals(bS[bZ],bT[bZ]);return!bV[0];}(bY))break;if(bV[0]){for(var bZ in bT)if(function(b0){bV[0]=!bT.hasOwnProperty(b0)||bS.hasOwnProperty(b0);return!bV[0];}(bZ))break;}return bV[0];}}else return bU=="function"&&("$Func"in bS?bS.$Func===bT.$Func&&bS.$Target===bT.$Target:"$Invokes"in bS&&"$Invokes"in bT&&w.arrayEquals(bS.$Invokes,bT.$Invokes));}};w.Hash=function(bS){var bT;bT=typeof bS;return bT=="function"?0:bT=="boolean"?bS?1:0:bT=="number"?bS:bT=="string"?w.hashString(bS):bT=="object"?bS==null?0:bS instanceof a.Array?w.hashArray(bS):w.hashObject(bS):0;};w.arrayEquals=function(bS,bT){var bU,bV;if(m.length(bS)===m.length(bT)){bU=true;bV=0;while(bU&&bV<m.length(bS)){!w.Equals(m.get(bS,bV),m.get(bT,bV))?bU=false:void 0;bV=bV+1;}return bU;}else return false;};w.dateEquals=function(bS,bT){return bS.getTime()===bT.getTime();};w.hashString=function(bS){var bT,bU,bV;if(bS===null)return 0;else{bT=5381;for(bU=0,bV=bS.length-1;bU<=bV;bU++)bT=w.hashMix(bT,bS[bU].charCodeAt());return bT;}};w.hashArray=function(bS){var bT,bU,bV;bT=-34948909;for(bU=0,bV=m.length(bS)-1;bU<=bV;bU++)bT=w.hashMix(bT,w.Hash(m.get(bS,bU)));return bT;};w.hashObject=function(bS){var bT,bU;if("GetHashCode"in bS)return bS.GetHashCode();else{bT=[0];for(var bV in bS)if(function(bW){bT[0]=w.hashMix(w.hashMix(bT[0],w.hashString(bW)),w.Hash(bS[bW]));return false;}(bV))break;return bT[0];}};w.hashMix=function(bS,bT){return(bS<<5)+bS+bT;};w.Compare=function(bS,bT){var bU,bV,bW,bX,bY,bZ;if(bS===bT)return 0;else{bV=typeof bS;switch(bV=="function"?1:bV=="boolean"?2:bV=="number"?2:bV=="string"?2:bV=="object"?3:0){case 0:return typeof bT=="undefined"?0:-1;case 1:return h.FailWith("Cannot compare function values.");case 2:return bS<bT?-1:1;case 3:if(bS===null)bW=-1;else if(bT===null)bW=1;else if("CompareTo"in bS)bW=bS.CompareTo(bT);else if("CompareTo0"in bS)bW=bS.CompareTo0(bT);else if(bS instanceof a.Array&&bT instanceof a.Array)bW=w.compareArrays(bS,bT);else if(bS instanceof a.Date&&bT instanceof a.Date)bW=w.compareDates(bS,bT);else{bX=[0];for(var b0 in bS)if(function(b1){return!bS.hasOwnProperty(b1)?false:!bT.hasOwnProperty(b1)?(bX[0]=1,true):(bX[0]=w.Compare(bS[b1],bT[b1]),bX[0]!==0);}(b0))break;if(bX[0]===0){for(var b1 in bT)if(function(b2){return!bT.hasOwnProperty(b2)?false:!bS.hasOwnProperty(b2)&&(bX[0]=-1,true);}(b1))break;}bW=bX[0];}return bW;}}};w.compareArrays=function(bS,bT){var bU,bV;if(m.length(bS)<m.length(bT))return -1;else if(m.length(bS)>m.length(bT))return 1;else{bU=0;bV=0;while(bU===0&&bV<m.length(bS)){bU=w.Compare(m.get(bS,bV),m.get(bT,bV));bV=bV+1;}return bU;}};w.compareDates=function(bS,bT){return w.Compare(bS.getTime(),bT.getTime());};y.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bS){var bT,bU;bT=bQ.random()*16|0;bU=bS=="x"?bT:bT&3|8;return bU.toString(16);});};z.$cctor=function(){z.$cctor=a.ignore;z.People=o.FromSeq(["John","Paul"]);};A=u.Dictionary=bN.Class({set_Item:function(bS,bT){this.set(bS,bT);},set:function(bS,bT){var bU,bV,bW,bX;bU=this;bV=this.hash(bS);bW=this.data[bV];bW==null?(this.count=this.count+1,this.data[bV]=new a.Array({K:bS,V:bT})):(bX=m.tryFindIndex(function(bY){return bU.equals.apply(null,[(h.KeyValue(bY))[0],bS]);},bW),bX==null?(this.count=this.count+1,bW.push({K:bS,V:bT})):bW[bX.$0]={K:bS,V:bT});},ContainsKey:function(bS){var bT,bU;bT=this;bU=this.data[this.hash(bS)];return bU==null?false:m.exists(function(bV){return bT.equals.apply(null,[(h.KeyValue(bV))[0],bS]);},bU);},TryGetValue:function(bS,bT){var bU,bV,bW;bU=this;bV=this.data[this.hash(bS)];return bV==null?false:(bW=m.tryPick(function(bX){var bY;bY=h.KeyValue(bX);return bU.equals.apply(null,[bY[0],bS])?{$:1,$0:bY[1]}:null;},bV),bW!=null&&bW.$==1&&(bT.set(bW.$0),true));},Remove:function(bS){return this.remove(bS);},get_Keys:function(){return new _7.New(this);},get_Item:function(bS){return this.get(bS);},remove:function(bS){var bT,bU,bV,bW;bT=this;bU=this.hash(bS);bV=this.data[bU];return bV==null?false:(bW=m.filter(function(bX){return!bT.equals.apply(null,[(h.KeyValue(bX))[0],bS]);},bV),m.length(bW)<bV.length&&(this.count=this.count-1,this.data[bU]=bW,true));},get:function(bS){var bT,bU;bT=this;bU=this.data[this.hash(bS)];return bU==null?Q.notPresent():m.pick(function(bV){var bW;bW=h.KeyValue(bV);return bT.equals.apply(null,[bW[0],bS])?{$:1,$0:bW[1]}:null;},bU);},GetEnumerator:function(){return R.Get0(this);},GetEnumerator0:function(){return R.Get0(m.concat(V.GetFieldValues(this.data)));}},e,A);A.New$5=bN.Ctor(function(){A.New$6.call(this,[],w.Equals,w.Hash);},A);A.New$6=bN.Ctor(function(bS,bT,bU){var bV,bW;e.New.call(this);this.equals=bT;this.hash=bU;this.count=0;this.data=[];bV=R.Get(bS);try{while(bV.MoveNext()){bW=bV.Current();this.set(bW.K,bW.V);}}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}},A);B=u.HashSet=bN.Class({Add:function(bS){return this.add(bS);},Contains:function(bS){var bT;bT=this.data[this.hash(bS)];return bT==null?false:this.arrContains(bS,bT);},add:function(bS){var bT,bU;bT=this.hash(bS);bU=this.data[bT];return bU==null?(this.data[bT]=[bS],this.count=this.count+1,true):this.arrContains(bS,bU)?false:(bU.push(bS),this.count=this.count+1,true);},arrContains:function(bS,bT){var bU,bV,bW,bX;bU=true;bV=0;bX=bT.length;while(bU&&bV<bX)if(this.equals.apply(null,[bT[bV],bS]))bU=false;else bV=bV+1;return!bU;},ExceptWith:function(bS){var bT;bT=R.Get(bS);try{while(bT.MoveNext())this.Remove(bT.Current());}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bS){var bT,bU,bV,bW;bT=0;bU=$.concat(this.data);for(bV=0,bW=bU.length-1;bV<=bW;bV++)m.set(bS,bV,bU[bV]);},IntersectWith:function(bS){var bT,bU,bV,bW,bX;bT=new B.New$4(bS,this.equals,this.hash);bU=$.concat(this.data);for(bV=0,bW=bU.length-1;bV<=bW;bV++){bX=bU[bV];!bT.Contains(bX)?this.Remove(bX):void 0;}},Remove:function(bS){var bT;bT=this.data[this.hash(bS)];return bT==null?false:this.arrRemove(bS,bT)&&(this.count=this.count-1,true);},arrRemove:function(bS,bT){var bU,bV,bW,bX;bU=true;bV=0;bX=bT.length;while(bU&&bV<bX)if(this.equals.apply(null,[bT[bV],bS])){bT.splice.apply(bT,[bV,1]);bU=false;}else bV=bV+1;return!bU;},GetEnumerator:function(){return R.Get($.concat(this.data));},GetEnumerator0:function(){return R.Get($.concat(this.data));}},e,B);B.New$3=bN.Ctor(function(){B.New$4.call(this,[],w.Equals,w.Hash);},B);B.New$4=bN.Ctor(function(bS,bT,bU){var bV;e.New.call(this);this.equals=bT;this.hash=bU;this.data=[];this.count=0;bV=R.Get(bS);try{while(bV.MoveNext())this.add(bV.Current());}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}},B);B.New$2=bN.Ctor(function(bS){B.New$4.call(this,bS,w.Equals,w.Hash);},B);C.Box=a.id;D.append=function(bS,bT){return{GetEnumerator:function(){var bU,bV;bU=R.Get(bS);bV=[true];return new S.New(bU,null,function(bW){var bX;return bW.s.MoveNext()?(bW.c=bW.s.Current(),true):(bX=bW.s,!w.Equals(bX,null)?bX.Dispose():void 0,bW.s=null,bV[0]&&(bV[0]=false,bW.s=R.Get(bT),bW.s.MoveNext()?(bW.c=bW.s.Current(),true):(bW.s.Dispose(),bW.s=null,false)));},function(bW){var bX;bX=bW.s;!w.Equals(bX,null)?bX.Dispose():void 0;});}};};D.head=function(bS){var bT;bT=R.Get(bS);try{return bT.MoveNext()?bT.Current():D.insufficient();}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}};D.fold=function(bS,bT,bU){var bV,bW;bV=bT;bW=R.Get(bU);try{while(bW.MoveNext())bV=bS(bV,bW.Current());return bV;}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}};D.distinctBy=function(bS,bT){return{GetEnumerator:function(){var bU,bV;bU=R.Get(bT);bV=new B.New$3();return new S.New(null,null,function(bW){var bX,bY;if(bU.MoveNext()){bX=bU.Current();bY=bV.Add(bS(bX));while(!bY&&bU.MoveNext()){bX=bU.Current();bY=bV.Add(bS(bX));}return bY&&(bW.c=bX,true);}else return false;},function(){bU.Dispose();});}};};D.iter=function(bS,bT){var bU;bU=R.Get(bT);try{while(bU.MoveNext())bS(bU.Current());}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}};D.map=function(bS,bT){return{GetEnumerator:function(){var bU;bU=R.Get(bT);return new S.New(null,null,function(bV){return bU.MoveNext()&&(bV.c=bS(bU.Current()),true);},function(){bU.Dispose();});}};};D.max=function(bS){var bT,bU,bV;bT=R.Get(bS);try{if(!bT.MoveNext())D.seqEmpty();bU=bT.Current();while(bT.MoveNext()){bV=bT.Current();w.Compare(bV,bU)===1?bU=bV:void 0;}return bU;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}};D.forall=function(bS,bT){return!D.exists(function(bU){return!bS(bU);},bT);};D.seqEmpty=function(){return h.FailWith("The input sequence was empty.");};D.exists=function(bS,bT){var bU,bV;bU=R.Get(bT);try{bV=false;while(!bV&&bU.MoveNext())bV=bS(bU.Current());return bV;}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}};m.choose=function(bS,bT){var bU,bV,bW,bX;bU=[];for(bV=0,bW=bT.length-1;bV<=bW;bV++){bX=bS(bT[bV]);bX==null?void 0:bU.push(bX.$0);}return bU;};m.tryFindIndex=function(bS,bT){var bU,bV;bU=null;bV=0;while(bV<bT.length&&bU==null){bS(bT[bV])?bU={$:1,$0:bV}:void 0;bV=bV+1;}return bU;};m.exists=function(bS,bT){var bU,bV,bW,bX;bU=false;bV=0;bX=m.length(bT);while(!bU&&bV<bX)if(bS(bT[bV]))bU=true;else bV=bV+1;return bU;};m.tryPick=function(bS,bT){var bU,bV,bW;bU=null;bV=0;while(bV<bT.length&&bU==null){bW=bS(bT[bV]);bW!=null&&bW.$==1?bU=bW:void 0;bV=bV+1;}return bU;};m.concat=function(bS){return a.Array.prototype.concat.apply([],m.ofSeq(bS));};m.ofSeq=function(bS){var bT,bU;if(bS instanceof a.Array)return bS.slice();else if(bS instanceof bm)return m.ofList(bS);else{bT=[];bU=R.Get(bS);try{while(bU.MoveNext())bT.push(bU.Current());return bT;}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}}};m.filter=function(bS,bT){var bU,bV,bW;bU=[];for(bV=0,bW=bT.length-1;bV<=bW;bV++)if(bS(bT[bV]))bU.push(bT[bV]);return bU;};m.map=function(bS,bT){var bU,bV,bW;bU=new a.Array(bT.length);for(bV=0,bW=bT.length-1;bV<=bW;bV++)bU[bV]=bS(bT[bV]);return bU;};m.iter=function(bS,bT){var bU,bV;for(bU=0,bV=bT.length-1;bU<=bV;bU++)bS(bT[bU]);};m.foldBack=function(bS,bT,bU){var bV,bW,bX,bY,bZ;bV=bU;bX=bT.length;for(bY=1,bZ=bX;bY<=bZ;bY++)bV=bS(bT[bX-bY],bV);return bV;};m.ofList=function(bS){var bT,bU;bU=[];bT=bS;while(!(bT.$==0)){bU.push(bl.head(bT));bT=bl.tail(bT);}return bU;};m.pick=function(bS,bT){var bU;bU=m.tryPick(bS,bT);return bU==null?h.FailWith("KeyNotFoundException"):bU.$0;};m.forall=function(bS,bT){var bU,bV,bW,bX;bU=true;bV=0;bX=m.length(bT);while(bU&&bV<bX)if(bS(bT[bV]))bV=bV+1;else bU=false;return bU;};m.create=function(bS,bT){var bU,bV,bW;bU=new a.Array(bS);for(bV=0,bW=bS-1;bV<=bW;bV++)bU[bV]=bT;return bU;};m.init=function(bS,bT){var bU,bV,bW;bS<0?h.FailWith("Negative size given."):null;bU=new a.Array(bS);for(bV=0,bW=bS-1;bV<=bW;bV++)bU[bV]=bT(bV);return bU;};F.LoadLocalTemplates=function(bS){!F.LocalTemplatesLoaded()?(F.set_LocalTemplatesLoaded(true),F.LoadNestedTemplates(self.document.body,"")):void 0;F.LoadedTemplates().set_Item(bS,F.LoadedTemplateFile(""));};F.GetOrLoadTemplate=function(bS,bT,bU,bV){F.LoadLocalTemplates("");F.PrepareTemplate(bS,bT,bU);return F.NamedTemplate(bS,bT,bV);};F.PrepareTemplate=function(bS,bT,bU){var bV,bW,bX,bY,bZ;if(!F.LoadedTemplateFile(bS).ContainsKey(bT==null?"":bT.$0)){bV=bU();for(bW=0,bX=bV.length-1;bW<=bX;bW++){bY=m.get(bV,bW);bZ=bY.parentNode;w.Equals(bZ,null)?void 0:bZ.removeChild(bY);}F.PrepareTemplateStrict(bS,bT,bV,null,null);}};F.LocalTemplatesLoaded=function(){X.$cctor();return X.LocalTemplatesLoaded;};F.set_LocalTemplatesLoaded=function(bS){X.$cctor();X.LocalTemplatesLoaded=bS;};F.LoadNestedTemplates=function(bS,bT){var bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8;function bU(b9){var b_,b$;if(!bV.ContainsKey(b9)){b_=(b$=null,[bW.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);b_[0]?(b8.Add(b9),bW.Remove(b9),F.PrepareTemplateStrict(bT,{$:1,$0:b9},b_[1][0],{$:1,$0:b_[1][1]},{$:1,$0:bU})):bP.warn(b8.Contains(b9)?"Encountered loop when instantiating "+b9:"Local template does not exist: "+b9);}}bV=F.LoadedTemplateFile(bT);bW=new A.New$5();bX=bS.querySelectorAll("[ws-template]");for(bY=0,bZ=bX.length-1;bY<=bZ;bY++){b0=bX[bY];b1=b0.getAttribute("ws-template").toLowerCase();b0.removeAttribute("ws-template");bW.set_Item(b1,[[b0],F.FakeRootSingle(b0)]);}b2=bS.querySelectorAll("[ws-children-template]");for(b3=0,b4=b2.length-1;b3<=b4;b3++){b5=b2[b3];b6=b5.getAttribute("ws-children-template").toLowerCase();b5.removeAttribute("ws-children-template");bW.set_Item(b6,(b7=W.ChildrenArray(b5),[b7,F.FakeRoot(b7)]));}b8=new B.New$3();while(bW.count>0)bU(D.head(bW.get_Keys()));};F.LoadedTemplates=function(){X.$cctor();return X.LoadedTemplates;};F.LoadedTemplateFile=function(bS){var bT,bU,bV;bT=(bU=null,[F.LoadedTemplates().TryGetValue(bS,{get:function(){return bU;},set:function(bW){bU=bW;}}),bU]);return bT[0]?bT[1]:(bV=new A.New$5(),(F.LoadedTemplates().set_Item(bS,bV),bV));};F.NamedTemplate=function(bS,bT,bU){var bV,bW;bV=(bW=null,[F.LoadedTemplateFile(bS).TryGetValue(bT==null?"":bT.$0,{get:function(){return bW;},set:function(bX){bW=bX;}}),bW]);return bV[0]?F.ChildrenTemplate(bV[1].cloneNode(true),bU):(bP.warn("Local template doesn't exist",bT),G.get_Empty());};F.PrepareTemplateStrict=function(bS,bT,bU,bV,bW){var bX,bY;function bZ(b4,b5){var b6,b7,b8,b9,b_,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu;function b$(cv){}while(true)switch(b4){case 0:if(b5!==null){b6=b5.nextSibling;if(w.Equals(b5.nodeType,U.TEXT_NODE))_5.convertTextNode(b5);else if(w.Equals(b5.nodeType,U.ELEMENT_NODE))b1(b5);b5=b6;}else return null;break;case 1:ca=_6.string(b5.nodeName,{$:1,$0:3},null).toLowerCase();cb=(b7=ca.indexOf("."),b7===-1?[bS,ca]:[_6.string(ca,null,{$:1,$0:b7-1}),_6.string(ca,{$:1,$0:b7+1},null)]);cc=cb[1];cd=cb[0];if(cd!==""&&!F.LoadedTemplates().ContainsKey(cd))return _5.failNotLoaded(cc);else{if(cd===""&&bW!=null)bW.$0(cc);ce=F.LoadedTemplates().get_Item(cd);if(!ce.ContainsKey(cc))return _5.failNotLoaded(cc);else{cf=ce.get_Item(cc);cg=cf.cloneNode(true);ch=new B.New$3();ci=new A.New$5();cj=b5.attributes;for(ck=0,cl=cj.length-1;ck<=cl;ck++){cm=cj.item(ck).name.toLowerCase();ci.set_Item(cm,(cn=cj.item(ck).nodeValue,cn===""?cm:cn.toLowerCase()));!ch.Add(cm)?bP.warn("Hole mapped twice",cm):void 0;}for(co=0,cp=b5.childNodes.length-1;co<=cp;co++){cq=b5.childNodes[co];w.Equals(cq.nodeType,U.ELEMENT_NODE)?!ch.Add(cq.nodeName.toLowerCase())?bP.warn("Hole filled twice",cc):void 0:void 0;}cr=b5.childNodes.length===1&&w.Equals(b5.firstChild.nodeType,U.TEXT_NODE);if(cr){b9=_5.fillTextHole(cg,b5.firstChild.textContent,cc);((function(cv){return function(cw){if(cw!=null)cv(cw.$0);};}((b_=function(cv){return function(cw){return cv.Add(cw);};}(ch),function(cv){return b$(b_(cv));})))(b9));}_5.removeHolesExcept(cg,ch);if(!cr){for(cs=0,ct=b5.childNodes.length-1;cs<=ct;cs++){cu=b5.childNodes[cs];w.Equals(cu.nodeType,U.ELEMENT_NODE)?cu.hasAttributes()?_5.fillInstanceAttrs(cg,cu):b0(cg,cu):void 0;}}_5.mapHoles(cg,ci);_5.fill(cg,b5.parentNode,b5);b5.parentNode.removeChild(b5);return;}}break;}}function b0(b4,b5){var b6,b8,b9;function b7(b_,b$){var ca,cb,cc;if(b8==="title"&&b5.hasChildNodes()){ca=bO.parseHTML(b5.textContent);b5.removeChild(b5.firstChild);for(cb=0,cc=ca.length-1;cb<=cc;cb++)b5.appendChild(m.get(ca,cb));}else null;b1(b5);return _5.fill(b5,b_,b$);}b8=b5.nodeName.toLowerCase();W.IterSelector(b4,"[ws-attr-holes]",function(b_){var b$,ca,cb,cc,cd;b$=bf.SplitChars(b_.getAttribute("ws-attr-holes"),[" "],1);for(ca=0,cb=b$.length-1;ca<=cb;ca++){cc=m.get(b$,ca);b_.setAttribute(cc,(cd=new a.RegExp("\\${"+b8+"}","ig"),b_.getAttribute(cc).replace(cd,b5.textContent)));}});b9=b4.querySelector("[ws-hole="+b8+"]");if(w.Equals(b9,null)){b6=b4.querySelector("[ws-replace="+b8+"]");return w.Equals(b6,null)?null:(b7(b6.parentNode,b6),void b6.parentNode.removeChild(b6));}else{while(b9.hasChildNodes())b9.removeChild(b9.lastChild);b9.removeAttribute("ws-hole");return b7(b9,null);}}function b1(b4){if(bf.StartsWith(b4.nodeName.toLowerCase(),"ws-"))b3(b4);else{_5.convertAttrs(b4);b2(b4.firstChild);}}function b2(b4){return bZ(0,b4);}function b3(b4){return bZ(1,b4);}bX=bV==null?F.FakeRoot(bU):bV.$0;bY=(bT==null?"":bT.$0).toLowerCase();F.LoadedTemplateFile(bS).set_Item(bY,bX);m.length(bU)>0?(function(b4){var b5,b6,b7,b8;while(true){b5=b4.querySelector("[ws-template]");if(w.Equals(b5,null)){b6=b4.querySelector("[ws-children-template]");if(w.Equals(b6,null))return null;else{b7=b6.getAttribute("ws-children-template");b6.removeAttribute("ws-children-template");F.PrepareTemplateStrict(bS,{$:1,$0:b7},W.ChildrenArray(b6),null,null);b4=b4;}}else{b8=b5.getAttribute("ws-template");(F.PrepareSingleTemplate(bS,{$:1,$0:b8},b5))(null);b4=b4;}}}(bX),b2(m.get(bU,0))):void 0;};F.FakeRootSingle=function(bS){var bT,bU,bV;bS.removeAttribute("ws-template");bT=bS.getAttribute("ws-replace");bT===null?void 0:(bS.removeAttribute("ws-replace"),bU=bS.parentNode,w.Equals(bU,null)?void 0:(bV=self.document.createElement(bS.tagName),bV.setAttribute("ws-replace",bT),bU.replaceChild(bV,bS)));return F.FakeRoot([bS]);};F.FakeRoot=function(bS){var bT,bU,bV;bT=self.document.createElement("div");for(bU=0,bV=bS.length-1;bU<=bV;bU++)bT.appendChild(m.get(bS,bU));return bT;};F.ChildrenTemplate=function(bS,bT){var bU,bV,bW,bX,bY;bU=F.InlineTemplate(bS,bT);bV=bU[1];bW=bU[0];bX=bW.Els;return!w.Equals(bX,null)&&bX.length===1&&(m.get(bX,0)instanceof U&&(w.Equals(m.get(bX,0).nodeType,U.ELEMENT_NODE)&&(bY=m.get(bX,0),true)))?be.TreeNode(bW,bV):G.Mk({$:6,$0:bW},bV);};F.PrepareSingleTemplate=function(bS,bT,bU){var bV,bW,bX;bV=F.FakeRootSingle(bU);bW=[bU];bX={$:1,$0:bV};return function(bY){F.PrepareTemplateStrict(bS,bT,bW,bX,bY);};};F.InlineTemplate=function(bS,bT){var bU,bV,bW,bX,b0,b1,b2,b3,b4,b5,b6;function bY(b7,b8){var b9,b_,b$;b9=bn.Insert(b7,b8);b1.push(bn.Updates(b9));b2.push([b7,b9]);b_=bN.GetOptional(b9.OnAfterRender);return b_==null?null:(b$=b_.$0,void b3.push(function(){b$(b7);}));}function bZ(b7){var b8,b9;b8=(b9=null,[b4.TryGetValue(b7,{get:function(){return b9;},set:function(b_){b9=b_;}}),b9]);return b8[0]?b8[1].$==0?{$:1,$0:b8[1].$1}:b8[1].$==1?{$:1,$0:G.TextNode(b8[1].$1)}:b8[1].$==2?{$:1,$0:G.TextView(b8[1].$1)}:b8[1].$==8?{$:1,$0:G.TextView(b8[1].$1.get_View())}:b8[1].$==9?{$:1,$0:G.TextView(M.Map(a.String,b8[1].$1.get_View()))}:b8[1].$==10?{$:1,$0:G.TextView(M.Map(function(b_){return b_.get_Input();},b8[1].$1.get_View()))}:b8[1].$==11?{$:1,$0:G.TextView(M.Map(a.String,b8[1].$1.get_View()))}:b8[1].$==12?{$:1,$0:G.TextView(M.Map(function(b_){return b_.get_Input();},b8[1].$1.get_View()))}:b8[1].$==13?{$:1,$0:G.TextView(M.Map(a.String,b8[1].$1.get_View()))}:(bP.warn("Content hole filled with attribute data",b7),null):null;}b0=[];b1=[];b2=[];b3=[];b4=new A.New$5();b5=R.Get(bT);try{while(b5.MoveNext()){b6=b5.Current();b4.set_Item(b6.$0,b6);}}finally{if(typeof b5=="object"&&"Dispose"in b5)b5.Dispose();}bU=W.ChildrenArray(bS);W.IterSelector(bS,"[ws-hole]",function(b7){var b8,b9,b_;b_=b7.getAttribute("ws-hole");b7.removeAttribute("ws-hole");while(b7.hasChildNodes())b7.removeChild(b7.lastChild);b8=bZ(b_);b8!=null&&b8.$==1?(b9=b8.$0,_0.LinkElement(b7,b9.docNode),b0.push(_2.New(bn.Empty(b7),b9.docNode,null,b7,K.Int(),null)),b1.push(b9.updates)):void 0;});W.IterSelector(bS,"[ws-replace]",function(b7){var b8,b9,b_,b$,ca,cb;b8=bZ(b7.getAttribute("ws-replace"));b8!=null&&b8.$==1?(b9=b8.$0,b_=b7.parentNode,b$=self.document.createTextNode(""),b_.replaceChild(b$,b7),ca=_0.InsertBeforeDelim(b$,b9.docNode),cb=m.tryFindIndex(function(cc){return b7===cc;},bU),cb==null?void 0:m.set(bU,cb.$0,b9.docNode),b0.push(_2.New(bn.Empty(b_),b9.docNode,{$:1,$0:[ca,b$]},b_,K.Int(),null)),b1.push(b9.updates)):void 0;});W.IterSelector(bS,"[ws-attr]",function(b7){var b8,b9,b_;b8=b7.getAttribute("ws-attr");b7.removeAttribute("ws-attr");b9=(b_=null,[b4.TryGetValue(b8,{get:function(){return b_;},set:function(b$){b_=b$;}}),b_]);b9[0]?b9[1].$==3?bY(b7,b9[1].$1):bP.warn("Attribute hole filled with non-attribute data",b8):void 0;});W.IterSelector(bS,"[ws-on]",function(b7){bY(b7,N.Concat(m.choose(function(b8){var b9,b_,b$;b9=bf.SplitChars(b8,[":"],1);b_=(b$=null,[b4.TryGetValue(m.get(b9,1),{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);return b_[0]?b_[1].$==4?{$:1,$0:bo.Handler(m.get(b9,0),b_[1].$1)}:b_[1].$==5?{$:1,$0:N.Handler(m.get(b9,0),b_[1].$2)}:(bP.warn("Event hole on"+m.get(b9,0)+" filled with non-event data",m.get(b9,1)),null):null;},bf.SplitChars(b7.getAttribute("ws-on"),[" "],1))));b7.removeAttribute("ws-on");});W.IterSelector(bS,"[ws-onafterrender]",function(b7){var b8,b9,b_;b8=b7.getAttribute("ws-onafterrender");b9=(b_=null,[b4.TryGetValue(b8,{get:function(){return b_;},set:function(b$){b_=b$;}}),b_]);b9[0]?b9[1].$==6?(b7.removeAttribute("ws-onafterrender"),bY(b7,bo.OnAfterRender(b9[1].$1))):b9[1].$==7?(b7.removeAttribute("ws-onafterrender"),bY(b7,bo.OnAfterRender(b9[1].$1))):bP.warn("onafterrender hole filled with non-onafterrender data",b8):void 0;});W.IterSelector(bS,"[ws-var]",function(b7){var b8,b9,b_;b8=b7.getAttribute("ws-var");b7.removeAttribute("ws-var");b9=(b_=null,[b4.TryGetValue(b8,{get:function(){return b_;},set:function(b$){b_=b$;}}),b_]);b9[0]?b9[1].$==8?bY(b7,bo.Value(b9[1].$1)):b9[1].$==9?bY(b7,bo.Checked(b9[1].$1)):b9[1].$==10?bY(b7,bo.IntValue(b9[1].$1)):b9[1].$==11?bY(b7,bo.IntValueUnchecked(b9[1].$1)):b9[1].$==12?bY(b7,bo.FloatValue(b9[1].$1)):b9[1].$==13?bY(b7,bo.FloatValueUnchecked(b9[1].$1)):bP.warn("Var hole filled with non-Var data",b8):void 0;});W.IterSelector(bS,"[ws-attr-holes]",function(b7){var b8,b9,b_,b$;b8=new a.RegExp(F.TextHoleRE(),"g");b9=bf.SplitChars(b7.getAttribute("ws-attr-holes"),[" "],1);b7.removeAttribute("ws-attr-holes");for(b_=0,b$=b9.length-1;b_<=b$;b_++)(function(){var ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm;cj=m.get(b9,b_);ck=b7.getAttribute(cj);ca=null;cb=0;cl=[];while(ca=b8.exec(ck),ca!==null){cm=_6.string(ck,{$:1,$0:cb},{$:1,$0:b8.lastIndex-m.get(ca,0).length-1});cb=b8.lastIndex;cl.push([cm,m.get(ca,1)]);}cd=_6.string(ck,{$:1,$0:cb},null);b8.lastIndex=0;ce=m.foldBack(function(cn,co){return(function(cp){var cq,cr;cq=cp[0];cr=cp[1];return function(cs){var ct,cu,cv,cw,cx;ct=cs[0];cu=cs[1];cv=(cw=(cx=null,[b4.TryGetValue(cr,{get:function(){return cx;},set:function(cy){cx=cy;}}),cx]),cw[0]?cw[1].$==1?{$:0,$0:cw[1].$1}:cw[1].$==2?{$:1,$0:cw[1].$1}:cw[1].$==8?{$:1,$0:cw[1].$1.get_View()}:cw[1].$==9?{$:1,$0:M.Map(a.String,cw[1].$1.get_View())}:cw[1].$==10?{$:1,$0:M.Map(function(cy){return cy.get_Input();},cw[1].$1.get_View())}:cw[1].$==11?{$:1,$0:M.Map(a.String,cw[1].$1.get_View())}:cw[1].$==12?{$:1,$0:M.Map(function(cy){return cy.get_Input();},cw[1].$1.get_View())}:cw[1].$==13?{$:1,$0:M.Map(a.String,cw[1].$1.get_View())}:(bP.warn("Attribute value hole filled with non-text data",cr),{$:0,$0:""}):{$:0,$0:""});return cv.$==1?[cq,new bm({$:1,$0:ct===""?cv.$0:M.Map(function(cy){return cy+ct;},cv.$0),$1:cu})]:[cq+cv.$0+ct,cu];};}(cn))(co);},cl,[cd,bm.Empty]);return bY(b7,ce[1].$==1?ce[1].$1.$==1?ce[1].$1.$1.$==1?ce[1].$1.$1.$1.$==0?(cf=ce[0],bo.Dynamic(cj,M.Map3(function(cn,co,cp){return cf+cn+co+cp;},ce[1].$0,ce[1].$1.$0,ce[1].$1.$1.$0))):(cg=ce[0],bo.Dynamic(cj,M.Map(function(cn){return cg+bf.concat("",cn);},M.Sequence(ce[1])))):(ch=ce[0],bo.Dynamic(cj,M.Map2(function(cn,co){return ch+cn+co;},ce[1].$0,ce[1].$1.$0))):ce[0]===""?bo.Dynamic(cj,ce[1].$0):(ci=ce[0],bo.Dynamic(cj,M.Map(function(cn){return ci+cn;},ce[1].$0))):N.Create(cj,ce[0]));}());});return[bN.DeleteEmptyFields({Els:bU,Dirty:true,Holes:b0,Attrs:b2,Render:(bV=b3.length==0?null:{$:1,$0:function(b7){m.iter(function(b8){b8(b7);},b3);}},bV?bV.$0:void 0),El:(bW=!w.Equals(bU,null)&&bU.length===1&&(m.get(bU,0)instanceof U&&(m.get(bU,0)instanceof a.Element&&(bX=m.get(bU,0),true)))?{$:1,$0:bX}:null,bW?bW.$0:void 0)},["Render","El"]),bc.TreeReduce(M.Const(),M.Map2Unit,b1)];};F.TextHoleRE=function(){X.$cctor();return X.TextHoleRE;};G=f.Doc=bN.Class({},e,G);G.RunById=function(bS,bT){var bU;bU=W.Doc().getElementById(bS);w.Equals(bU,null)?h.FailWith("invalid id: "+bS):G.Run(bU,bT);};G.Convert=function(bS,bT){return G.Flatten(M.MapSeqCached(bS,bT));};G.Run=function(bS,bT){_0.LinkElement(bS,bT.docNode);G.RunInPlace(false,bS,bT);};G.Flatten=function(bS){return G.EmbedView(M.Map(G.Concat,bS));};G.RunInPlace=function(bS,bT,bU){var bV;bV=_0.CreateRunState(bT,bU.docNode);M.Sink(_8.get_UseAnimations()||_9.BatchUpdatesEnabled()?_.StartProcessor(_0.PerformAnimatedUpdate(bS,bV,bU.docNode)):function(){_0.PerformSyncUpdate(bS,bV,bU.docNode);},bU.updates);};G.Concat=function(bS){var bT;bT=bc.ofSeqNonCopying(bS);return bc.TreeReduce(G.get_Empty(),G.Append,bT);};G.EmbedView=function(bS){var bT;bT=_0.CreateEmbedNode();return G.Mk({$:2,$0:bT},M.Map(a.ignore,M.Bind(function(bU){_0.UpdateEmbedNode(bT,bU.docNode);return bU.updates;},bS)));};G.get_Empty=function(){return G.Mk(null,M.Const());};G.Append=function(bS,bT){return G.Mk({$:0,$0:bS.docNode,$1:bT.docNode},M.Map2Unit(bS.updates,bT.updates));};G.Mk=function(bS,bT){return new G.New(bS,bT);};G.TextNode=function(bS){return G.Mk({$:5,$0:W.CreateText(bS)},M.Const());};G.TextView=function(bS){var bT;bT=_0.CreateTextNode();return G.Mk({$:4,$0:bT},M.Map(function(bU){_0.UpdateTextNode(bT,bU);},bS));};G.New=bN.Ctor(function(bS,bT){e.New.call(this);this.docNode=bS;this.updates=bT;},G);I.NewFromSeq=function(bS){var bT,bU,bV;bT={};bU=R.Get(bS);try{while(bU.MoveNext()){bV=bU.Current();bT[bV[0]]=bV[1];}}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}return bT;};K.Int=function(){K.set_counter(K.counter()+1);return K.counter();};K.set_counter=function(bS){_1.$cctor();_1.counter=bS;};K.counter=function(){_1.$cctor();return _1.counter;};M=f.View=bN.Class({},null,M);t.Obsolete=function(bS){var bT,bU,bV,bW,bX;bU=bS.s;if(bU==null||(bU!=null&&bU.$==2?(bT=bU.$1,false):bU!=null&&bU.$==3?(bT=bU.$1,false):true))void 0;else{bS.s=null;for(bV=0,bW=m.length(bT)-1;bV<=bW;bV++){bX=m.get(bT,bV);typeof bX=="object"?function(bY){t.Obsolete(bY);}(bX):bX();}}};t.New=function(bS){return{s:bS};};o.FromSeq=function(bS){return o.Create(a.id,bS);};o.Create=function(bS,bT){return o.CreateWithStorage(bS,_4.InMemory(m.ofSeq(bT)));};o.CreateWithStorage=function(bS,bT){return new o.New(bS,bT);};N=f.AttrProxy=bN.Class({},null,N);N.Handler=function(bS,bT){return N.HandlerImpl(bS,bT);};N.Concat=function(bS){var bT;bT=bc.ofSeqNonCopying(bS);return bc.TreeReduce(bn.EmptyAttr(),N.Append,bT);};N.Create=function(bS,bT){return bn.Static(function(bU){W.SetAttr(bU,bS,bT);});};N.HandlerImpl=function(bS,bT){return bn.Static(function(bU){bU.addEventListener(bS,function(bV){return(bT(bU))(bV);},false);});};N.Append=function(bS,bT){return bn.AppendTree(bS,bT);};O=f.CheckedInput=bN.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,O);P.TryParseInt32=function(bS,bT){return P.TryParse(bS,-2147483648,2147483647,bT);};Q.notPresent=function(){return h.FailWith("The given key was not present in the dictionary.");};R.Get=function(bS){return bS instanceof a.Array?R.ArrayEnumerator(bS):w.Equals(typeof bS,"string")?R.StringEnumerator(bS):bS.GetEnumerator();};R.ArrayEnumerator=function(bS){return new S.New(0,null,function(bT){var bU;bU=bT.s;return bU<m.length(bS)&&(bT.c=m.get(bS,bU),bT.s=bU+1,true);},void 0);};R.StringEnumerator=function(bS){return new S.New(0,null,function(bT){var bU;bU=bT.s;return bU<bS.length&&(bT.c=bS[bU],bT.s=bU+1,true);},void 0);};R.Get0=function(bS){return bS instanceof a.Array?R.ArrayEnumerator(bS):w.Equals(typeof bS,"string")?R.StringEnumerator(bS):"GetEnumerator0"in bS?bS.GetEnumerator0():bS.GetEnumerator();};S=R.T=bN.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},e,S);S.New=bN.Ctor(function(bS,bT,bU,bV){e.New.call(this);this.s=bS;this.c=bT;this.n=bU;this.d=bV;},S);V.GetFieldValues=function(bS){var bT,bU;bT=[];for(var bV in bS)bT.push(bS[bV]);return bT;};W.Doc=function(){Z.$cctor();return Z.Doc;};W.ChildrenArray=function(bS){var bT,bU,bV;bT=[];for(bU=0,bV=bS.childNodes.length-1;bU<=bV;bU++)bT.push(bS.childNodes[bU]);return bT;};W.IterSelector=function(bS,bT,bU){var bV,bW,bX;bV=bS.querySelectorAll(bT);for(bW=0,bX=bV.length-1;bW<=bX;bW++)bU(bV[bW]);};W.InsertAt=function(bS,bT,bU){var bV;if(!(bU.parentNode===bS&&bT===(bV=bU.nextSibling,w.Equals(bV,null)?null:bV)))bS.insertBefore(bU,bT);};W.CreateText=function(bS){return W.Doc().createTextNode(bS);};W.SetAttr=function(bS,bT,bU){bS.setAttribute(bT,bU);};W.RemoveNode=function(bS,bT){if(bT.parentNode===bS)bS.removeChild(bT);};M.MapSeqCached=function(bS,bT){return M.MapSeqCachedBy(a.id,bS,bT);};M.MapSeqCachedBy=function(bS,bT,bU){var bV;bV=[new A.New$5()];return M.Map(function(bW){var bX,bY,bZ;bX=bV[0];bY=new A.New$5();bZ=bc.mapInPlace(function(b0){var b1,b2;b1=bS(b0);b2=bX.ContainsKey(b1)?bX.get_Item(b1):bT(b0);bY.set_Item(b1,b2);return b2;},m.ofSeq(bW));bV[0]=bY;return bZ;},bU);};M.Map=function(bS,bT){return M.CreateLazy(function(){return t.Map(bS,bT());});};M.Sink=function(bS,bT){function bU(){t.WhenRun(bT(),bS,function(){br.scheduler().Fork(bU);});}br.scheduler().Fork(bU);};M.CreateLazy=function(bS){var bT;bT={c:null,o:bS};return function(){var bU,bV;bU=bT.c;return bU===null?(bU=bT.o(),bT.c=bU,(bV=bU.s,bV!=null&&bV.$==0)?bT.o=null:t.WhenObsoleteRun(bU,function(){bT.c=null;}),bU):bU;};};M.Bind=function(bS,bT){return M.Join(M.Map(bS,bT));};M.Const=function(bS){var bT;bT=t.New({$:0,$0:bS});return function(){return bT;};};M.Map2Unit=function(bS,bT){return M.CreateLazy(function(){return t.Map2Unit(bS(),bT());});};M.Join=function(bS){return M.CreateLazy(function(){return t.Join(bS());});};M.Map3=function(bS,bT,bU,bV){return M.CreateLazy(function(){return t.Map3(bS,bT(),bU(),bV());});};M.Sequence=function(bS){return M.CreateLazy(function(){return t.Sequence(D.map(function(bT){return bT();},bS));});};M.Map2=function(bS,bT,bU){return M.CreateLazy(function(){return t.Map2(bS,bT(),bU());});};X.$cctor=function(){X.$cctor=a.ignore;X.LoadedTemplates=new A.New$5();X.LocalTemplatesLoaded=false;X.TextHoleRE="\\${([^}]+)}";};Z.$cctor=function(){Z.$cctor=a.ignore;Z.Doc=self.document;};_0.LinkElement=function(bS,bT){_0.InsertDoc(bS,bT,null);};_0.InsertDoc=function(bS,bT,bU){var bV;return bT!=null&&bT.$==1?_0.InsertNode(bS,bT.$0.El,bU):bT!=null&&bT.$==2?(bV=bT.$0,(bV.Dirty=false,_0.InsertDoc(bS,bV.Current,bU))):bT==null?bU:bT!=null&&bT.$==4?_0.InsertNode(bS,bT.$0.Text,bU):bT!=null&&bT.$==5?_0.InsertNode(bS,bT.$0,bU):bT!=null&&bT.$==6?m.foldBack(function(bW,bX){return bW==null||bW.constructor===L?_0.InsertDoc(bS,bW,bX):_0.InsertNode(bS,bW,bX);},bT.$0.Els,bU):_0.InsertDoc(bS,bT.$0,_0.InsertDoc(bS,bT.$1,bU));};_0.CreateRunState=function(bS,bT){return bh.New(bi.get_Empty(),_0.CreateElemNode(bS,bn.EmptyAttr(),bT));};_0.PerformAnimatedUpdate=function(bS,bT,bU){var bV;return _8.get_UseAnimations()?(bV=null,br.Delay(function(){var bW,bX,bY;bW=bi.FindAll(bU);bX=_0.ComputeChangeAnim(bT,bW);bY=_0.ComputeEnterAnim(bT,bW);return br.Bind(_8.Play(_8.Append(bX,_0.ComputeExitAnim(bT,bW))),function(){return br.Bind(_0.SyncElemNodesNextFrame(bS,bT),function(){return br.Bind(_8.Play(bY),function(){bT.PreviousNodes=bW;return br.Return(null);});});});})):_0.SyncElemNodesNextFrame(bS,bT);};_0.PerformSyncUpdate=function(bS,bT,bU){var bV;bV=bi.FindAll(bU);_0.SyncElemNode(bS,bT.Top);bT.PreviousNodes=bV;};_0.CreateEmbedNode=function(){return{Current:null,Dirty:false};};_0.UpdateEmbedNode=function(bS,bT){bS.Current=bT;bS.Dirty=true;};_0.InsertNode=function(bS,bT,bU){W.InsertAt(bS,bU,bT);return bT;};_0.CreateElemNode=function(bS,bT,bU){var bV;_0.LinkElement(bS,bU);bV=bn.Insert(bS,bT);return _2.New(bV,bU,null,bS,K.Int(),bN.GetOptional(bV.OnAfterRender));};_0.SyncElemNodesNextFrame=function(bS,bT){function bU(bV){a.requestAnimationFrame(function(){_0.SyncElemNode(bS,bT.Top);bV();});}return _9.BatchUpdatesEnabled()?br.FromContinuations(function(bV,bW,bX){return bU.apply(null,[bV,bW,bX]);}):(_0.SyncElemNode(bS,bT.Top),br.Return(null));};_0.ComputeExitAnim=function(bS,bT){return _8.Concat(m.map(function(bU){return bn.GetExitAnim(bU.Attr);},bi.ToArray(bi.Except(bT,bi.Filter(function(bU){return bn.HasExitAnim(bU.Attr);},bS.PreviousNodes)))));};_0.ComputeEnterAnim=function(bS,bT){return _8.Concat(m.map(function(bU){return bn.GetEnterAnim(bU.Attr);},bi.ToArray(bi.Except(bS.PreviousNodes,bi.Filter(function(bU){return bn.HasEnterAnim(bU.Attr);},bT)))));};_0.ComputeChangeAnim=function(bS,bT){var bU;function bV(bW){return bn.HasChangeAnim(bW.Attr);}bU=function(bW){return bi.Filter(bV,bW);};return _8.Concat(m.map(function(bW){return bn.GetChangeAnim(bW.Attr);},bi.ToArray(bi.Intersect(bU(bS.PreviousNodes),bU(bT)))));};_0.SyncElemNode=function(bS,bT){!bS?_0.SyncElement(bT):void 0;_0.Sync(bT.Children);_0.AfterRender(bT);};_0.InsertBeforeDelim=function(bS,bT){var bU,bV;bU=bS.parentNode;bV=self.document.createTextNode("");bU.insertBefore(bV,bS);_0.LinkPrevElement(bS,bT);return bV;};_0.SyncElement=function(bS){function bT(bU){function bV(bW){var bX,bY;return bW!=null&&bW.$==0?bV(bW.$0)||bV(bW.$1):bW!=null&&bW.$==2?(bX=bW.$0,bX.Dirty||bV(bX.Current)):bW!=null&&bW.$==6&&(bY=bW.$0,bY.Dirty||m.exists(bT,bY.Holes));}return bV(bU.Children);}bn.Sync(bS.El,bS.Attr);bT(bS)?_0.DoSyncElement(bS):void 0;};_0.Sync=function(bS){var bT,bU;if(bS!=null&&bS.$==1)_0.SyncElemNode(false,bS.$0);else if(bS!=null&&bS.$==2)_0.Sync(bS.$0.Current);else if(bS==null);else if(bS!=null&&bS.$==5);else if(bS!=null&&bS.$==4){bT=bS.$0;bT.Dirty?(bT.Text.nodeValue=bT.Value,bT.Dirty=false):void 0;}else if(bS!=null&&bS.$==6){bU=bS.$0;m.iter(function(bV){_0.SyncElemNode(false,bV);},bU.Holes);m.iter(function(bV){bn.Sync(bV[0],bV[1]);},bU.Attrs);_0.AfterRender(bU);}else{_0.Sync(bS.$0);_0.Sync(bS.$1);}};_0.AfterRender=function(bS){var bT;bT=bN.GetOptional(bS.Render);bT!=null&&bT.$==1?(bT.$0(bS.El),bN.SetOptional(bS,"Render",null)):void 0;};_0.CreateTextNode=function(){return{Text:W.CreateText(""),Dirty:false,Value:""};};_0.UpdateTextNode=function(bS,bT){bS.Value=bT;bS.Dirty=true;};_0.LinkPrevElement=function(bS,bT){_0.InsertDoc(bS.parentNode,bT,bS);};_0.DoSyncElement=function(bS){var bT,bU,bV;function bW(bX,bY){var bZ,b0;return bX!=null&&bX.$==1?bX.$0.El:bX!=null&&bX.$==2?(bZ=bX.$0,bZ.Dirty?(bZ.Dirty=false,_0.InsertDoc(bT,bZ.Current,bY)):bW(bZ.Current,bY)):bX==null?bY:bX!=null&&bX.$==4?bX.$0.Text:bX!=null&&bX.$==5?bX.$0:bX!=null&&bX.$==6?(b0=bX.$0,(b0.Dirty?b0.Dirty=false:void 0,m.foldBack(function(b1,b2){return b1==null||b1.constructor===L?bW(b1,b2):b1;},b0.Els,bY))):bW(bX.$0,bW(bX.$1,bY));}bT=bS.El;bE.Iter((bU=bS.El,function(bX){W.RemoveNode(bU,bX);}),bE.Except(bE.DocChildren(bS),bE.Children(bS.El,bN.GetOptional(bS.Delimiters))));bW(bS.Children,(bV=bN.GetOptional(bS.Delimiters),bV!=null&&bV.$==1?bV.$0[1]:null));};_1.$cctor=function(){_1.$cctor=a.ignore;_1.counter=0;};_2=f.DocElemNode=bN.Class({Equals:function(bS){return this.ElKey===bS.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_2);_2.New=function(bS,bT,bU,bV,bW,bX){var bY;return new _2((bY={Attr:bS,Children:bT,El:bV,ElKey:bW},(bN.SetOptional(bY,"Delimiters",bU),bN.SetOptional(bY,"Render",bX),bY)));};_4.InMemory=function(bS){return new bd.New(bS);};_5.convertTextNode=function(bS){var bT,bU,bV,bW,bX,bY;bT=null;bU=0;bW=bS.textContent;bX=new a.RegExp(F.TextHoleRE(),"g");while(bT=bX.exec(bW),bT!==null){bS.parentNode.insertBefore(self.document.createTextNode(_6.string(bW,{$:1,$0:bU},{$:1,$0:bX.lastIndex-m.get(bT,0).length-1})),bS);bU=bX.lastIndex;bY=self.document.createElement("span");bY.setAttribute("ws-replace",m.get(bT,1).toLowerCase());bS.parentNode.insertBefore(bY,bS);}bX.lastIndex=0;bS.textContent=_6.string(bW,{$:1,$0:bU},null);};_5.failNotLoaded=function(bS){bP.warn("Instantiating non-loaded template",bS);};_5.fillTextHole=function(bS,bT,bU){var bV;bV=bS.querySelector("[ws-replace]");return w.Equals(bV,null)?(bP.warn("Filling non-existent text hole",bU),null):(bV.parentNode.replaceChild(new a.Text(bT),bV),{$:1,$0:bV.getAttribute("ws-replace")});};_5.removeHolesExcept=function(bS,bT){function bU(bV){W.IterSelector(bS,"["+bV+"]",function(bW){if(!bT.Contains(bW.getAttribute(bV)))bW.removeAttribute(bV);});}bU("ws-attr");bU("ws-onafterrender");bU("ws-var");W.IterSelector(bS,"[ws-hole]",function(bV){if(!bT.Contains(bV.getAttribute("ws-hole"))){bV.removeAttribute("ws-hole");while(bV.hasChildNodes())bV.removeChild(bV.lastChild);}});W.IterSelector(bS,"[ws-replace]",function(bV){if(!bT.Contains(bV.getAttribute("ws-replace")))bV.parentNode.removeChild(bV);});W.IterSelector(bS,"[ws-on]",function(bV){bV.setAttribute("ws-on",bf.concat(" ",m.filter(function(bW){return bT.Contains(m.get(bf.SplitChars(bW,[":"],1),1));},bf.SplitChars(bV.getAttribute("ws-on"),[" "],1))));});W.IterSelector(bS,"[ws-attr-holes]",function(bV){var bW,bX,bY,bZ,b0;bW=bf.SplitChars(bV.getAttribute("ws-attr-holes"),[" "],1);for(bX=0,bY=bW.length-1;bX<=bY;bX++){bZ=m.get(bW,bX);bV.setAttribute(bZ,(b0=new a.RegExp(F.TextHoleRE(),"g"),bV.getAttribute(bZ).replace(b0,function(b1,b2){return bT.Contains(b2)?b1:"";})));}});};_5.fillInstanceAttrs=function(bS,bT){var bU,bV,bW,bX,bY;_5.convertAttrs(bT);bU=bT.nodeName.toLowerCase();bV=bS.querySelector("[ws-attr="+bU+"]");if(w.Equals(bV,null))bP.warn("Filling non-existent attr hole",bU);else{bV.removeAttribute("ws-attr");for(bW=0,bX=bT.attributes.length-1;bW<=bX;bW++){bY=bT.attributes.item(bW);bY.name==="class"&&bV.hasAttribute("class")?bV.setAttribute("class",bV.getAttribute("class")+" "+bY.nodeValue):bV.setAttribute(bY.name,bY.nodeValue);}}};_5.mapHoles=function(bS,bT){function bU(bV){W.IterSelector(bS,"["+bV+"]",function(bW){var bX,bY;bX=(bY=null,[bT.TryGetValue(bW.getAttribute(bV).toLowerCase(),{get:function(){return bY;},set:function(bZ){bY=bZ;}}),bY]);bX[0]?bW.setAttribute(bV,bX[1]):void 0;});}bU("ws-hole");bU("ws-replace");bU("ws-attr");bU("ws-onafterrender");bU("ws-var");W.IterSelector(bS,"[ws-on]",function(bV){bV.setAttribute("ws-on",bf.concat(" ",m.map(function(bW){var bX,bY,bZ;bX=bf.SplitChars(bW,[":"],1);bY=(bZ=null,[bT.TryGetValue(m.get(bX,1),{get:function(){return bZ;},set:function(b0){bZ=b0;}}),bZ]);return bY[0]?m.get(bX,0)+":"+bY[1]:bW;},bf.SplitChars(bV.getAttribute("ws-on"),[" "],1))));});W.IterSelector(bS,"[ws-attr-holes]",function(bV){var bW,bX,bY;bW=bf.SplitChars(bV.getAttribute("ws-attr-holes"),[" "],1);for(bX=0,bY=bW.length-1;bX<=bY;bX++)(function(){var bZ;function b0(b1,b2){var b3;b3=h.KeyValue(b2);return b1.replace(new a.RegExp("\\${"+b3[0]+"}","ig"),"${"+b3[1]+"}");}bZ=m.get(bW,bX);return bV.setAttribute(bZ,(((bN.Curried3(D.fold))(b0))(bV.getAttribute(bZ)))(bT));}());});};_5.fill=function(bS,bT,bU){while(true)if(bS.hasChildNodes())bU=bT.insertBefore(bS.lastChild,bU);else return null;};_5.convertAttrs=function(bS){var bU,bV,bW,bX,bY,bZ,b0,b1;function bT(b2){var b3;b3=bS.getAttribute(b2);b3===null?void 0:bS.setAttribute(b2,b3.toLowerCase());}bU=bS.attributes;bV=[];bW=[];bX=[];for(bY=0,bZ=bU.length-1;bY<=bZ;bY++){b0=bU.item(bY);bf.StartsWith(b0.nodeName,"ws-on")&&b0.nodeName!=="ws-onafterrender"&&b0.nodeName!=="ws-on"?(bV.push(b0.nodeName),bW.push(_6.string(b0.nodeName,{$:1,$0:"ws-on".length},null)+":"+b0.nodeValue.toLowerCase())):!bf.StartsWith(b0.nodeName,"ws-")&&(new a.RegExp(F.TextHoleRE())).test(b0.nodeValue)?(b0.nodeValue=(b1=new a.RegExp(F.TextHoleRE(),"g"),b0.nodeValue.replace(b1,function(b2,b3){return"${"+b3.toLowerCase()+"}";})),bX.push(b0.nodeName)):void 0;}!(bW.length==0)?bS.setAttribute("ws-on",bf.concat(" ",bW)):void 0;!(bX.length==0)?bS.setAttribute("ws-attr-holes",bf.concat(" ",bX)):void 0;bT("ws-hole");bT("ws-replace");bT("ws-attr");bT("ws-onafterrender");bT("ws-var");m.iter(function(b2){bS.removeAttribute(b2);},bV);};_6.string=function(bS,bT,bU){return bT==null?bU!=null&&bU.$==1?bS.slice(0,bU.$0+1):"":bU==null?bS.slice(bT.$0):bS.slice(bT.$0,bU.$0+1);};D.insufficient=function(){return h.FailWith("The input sequence has an insufficient number of elements.");};_7=u.KeyCollection=bN.Class({GetEnumerator$1:function(){return R.Get(D.map(function(bS){return bS.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},e,_7);_7.New=bN.Ctor(function(bS){e.New.call(this);this.d=bS;},_7);_8.get_UseAnimations=function(){return bj.UseAnimations();};_8.Play=function(bS){var bT;bT=null;return br.Delay(function(){return br.Bind(_8.Run(a.ignore,bj.Actions(bS)),function(){bj.Finalize(bS);return br.Return(null);});});};_8.Append=function(bS,bT){return{$:0,$0:bs.Append(bS.$0,bT.$0)};};_8.Run=function(bS,bT){var bU;function bV(bW){function bX(bY,bZ){var b0;b0=bZ-bY;bT.Compute(b0);bS();return b0<=bU?void a.requestAnimationFrame(function(b1){bX(bY,b1);}):bW();}a.requestAnimationFrame(function(bY){bX(bY,bY);});}bU=bT.Duration;return bU===0?br.Zero():br.FromContinuations(function(bW,bX,bY){return bV.apply(null,[bW,bX,bY]);});};_8.Concat=function(bS){return{$:0,$0:bs.Concat(D.map(bj.List,bS))};};_8.get_Empty=function(){return{$:0,$0:bs.Empty()};};_9.BatchUpdatesEnabled=function(){bk.$cctor();return bk.BatchUpdatesEnabled;};_.StartProcessor=function(bS){var bT;function bU(){var bV;bV=null;return br.Delay(function(){return br.Bind(bS,function(){var bW;bW=bT[0];return bW===1?(bT[0]=0,br.Zero()):bW===2?(bT[0]=1,bU()):br.Zero();});});}bT=[0];return function(){var bV;bV=bT[0];bV===0?(bT[0]=1,br.Start(bU(),null)):bV===1?bT[0]=2:void 0;};};$.concat=function(bS){var bT,bU;bT=[];for(var bV in bS)bT.push.apply(bT,bS[bV]);return bT;};bb.New=function(bS,bT,bU,bV){var bW;bW={DynElem:bS,DynFlags:bT,DynNodes:bU};bN.SetOptional(bW,"OnAfterRender",bV);return bW;};bc.mapInPlace=function(bS,bT){var bU,bV;for(bU=0,bV=bT.length-1;bU<=bV;bU++)bT[bU]=bS(bT[bU]);return bT;};bc.ofSeqNonCopying=function(bS){var bT,bU;if(bS instanceof a.Array)return bS;else if(bS instanceof bm)return m.ofList(bS);else if(bS===null)return[];else{bT=[];bU=R.Get(bS);try{while(bU.MoveNext())bT.push(bU.Current());return bT;}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}}};bc.TreeReduce=function(bS,bT,bU){var bV;function bW(bX,bY){var bZ,b0;return bY<=0?bS:bY===1&&(bX>=0&&bX<bV)?m.get(bU,bX):(b0=bY/2>>0,bT(bW(bX,b0),bW(bX+b0,bY-b0)));}bV=m.length(bU);return bW(0,bV);};bc.MapTreeReduce=function(bS,bT,bU,bV){var bW;function bX(bY,bZ){var b0,b1;return bZ<=0?bT:bZ===1&&(bY>=0&&bY<bW)?bS(m.get(bV,bY)):(b1=bZ/2>>0,bU(bX(bY,b1),bX(bY+b1,bZ-b1)));}bW=m.length(bV);return bX(0,bW);};bd=_4.ArrayStorage=bN.Class({SSetAt:function(bS,bT,bU){m.set(bU,bS,bT);return bU;},SAppend:function(bS,bT){bT.push(bS);return bT;},SInit:function(){return this.init;}},e,bd);bd.New=bN.Ctor(function(bS){e.New.call(this);this.init=bS;},bd);be=f.Elt=bN.Class({},G,be);be.TreeNode=function(bS,bT){var bU,bV;function bW(bX){return bX[1];}bU=bp.Create(bT);return new be.New$1({$:6,$0:bS},M.Map2Unit((bV=m.map(function(bX){return bn.Updates(bW(bX));},bS.Attrs),bc.TreeReduce(M.Const(),M.Map2Unit,bV)),bU.v),m.get(bS.Els,0),bU);};be.New$1=bN.Ctor(function(bS,bT,bU,bV){G.New.call(this,bS,bT);this.docNode$1=bS;this.updates$1=bT;this.elt=bU;this.rvUpdates=bV;},be);bf.concat=function(bS,bT){return m.ofSeq(bT).join(bS);};bf.SplitChars=function(bS,bT,bU){return bf.Split(bS,new a.RegExp("["+bf.RegexEscape(bT.join(""))+"]"),bU);};bf.StartsWith=function(bS,bT){return bS.substring(0,bT.length)==bT;};bf.Split=function(bS,bT,bU){return bU===1?m.filter(function(bV){return bV!=="";},bf.SplitWith(bS,bT)):bf.SplitWith(bS,bT);};bf.RegexEscape=function(bS){return bS.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bf.SplitWith=function(bS,bT){return bS.split(bT);};bf.forall=function(bS,bT){return D.forall(bS,bf.protect(bT));};bf.protect=function(bS){return bS===null?"":bS;};bh.New=function(bS,bT){return{PreviousNodes:bS,Top:bT};};bi.get_Empty=function(){return{$:0,$0:new B.New$3()};};bi.FindAll=function(bS){var bT;function bU(bW){if(bW!=null&&bW.$==0){bU(bW.$0);bU(bW.$1);}else if(bW!=null&&bW.$==1)bV(bW.$0);else if(bW!=null&&bW.$==2)bU(bW.$0.Current);else if(bW!=null&&bW.$==6)m.iter(bV,bW.$0.Holes);}function bV(bW){bT.push(bW);bU(bW.Children);}bT=[];bU(bS);return{$:0,$0:new B.New$2(bT)};};bi.Filter=function(bS,bT){return{$:0,$0:bz.Filter(bS,bT.$0)};};bi.Except=function(bS,bT){return{$:0,$0:bz.Except(bS.$0,bT.$0)};};bi.ToArray=function(bS){return bz.ToArray(bS.$0);};bi.Intersect=function(bS,bT){return{$:0,$0:bz.Intersect(bS.$0,bT.$0)};};bj.UseAnimations=function(){bq.$cctor();return bq.UseAnimations;};bj.Actions=function(bS){return bj.ConcatActions(m.choose(function(bT){return bT.$==1?{$:1,$0:bT.$0}:null;},bs.ToArray(bS.$0)));};bj.Finalize=function(bS){m.iter(function(bT){if(bT.$==0)bT.$0();},bs.ToArray(bS.$0));};bj.ConcatActions=function(bS){var bT,bU,bV,bW;bT=bc.ofSeqNonCopying(bS);bU=m.length(bT);return bU===0?bj.Const():bU===1?m.get(bT,0):(bV=D.max(D.map(function(bX){return bX.Duration;},bT)),(bW=m.map(function(bX){return bj.Prolong(bV,bX);},bT),bj.Def(bV,function(bX){m.iter(function(bY){bY.Compute(bX);},bW);})));};bj.List=function(bS){return bS.$0;};bj.Const=function(bS){return bj.Def(0,function(){return bS;});};bj.Def=function(bS,bT){return{Compute:bT,Duration:bS};};bj.Prolong=function(bS,bT){var bU,bV,bW;bU=bT.Compute;bV=bT.Duration;bW=bI.Create(function(){return bT.Compute(bT.Duration);});return{Compute:function(bX){return bX>=bV?bW.f():bU(bX);},Duration:bS};};bk.$cctor=function(){bk.$cctor=a.ignore;bk.BatchUpdatesEnabled=true;};bm=bl.T=bN.Class({GetEnumerator:function(){return new S.New(this,null,function(bS){var bT;bT=bS.s;return bT.$==0?false:(bS.c=bT.$0,bS.s=bT.$1,true);},void 0);},GetEnumerator0:function(){return R.Get(this);}},null,bm);bm.Empty=new bm({$:0});bn.Insert=function(bS,bT){var bU,bV,bW;function bX(bY){if(!(bY===null))if(bY!=null&&bY.$==1)bU.push(bY.$0);else if(bY!=null&&bY.$==2){bX(bY.$0);bX(bY.$1);}else if(bY!=null&&bY.$==3)bY.$0(bS);else if(bY!=null&&bY.$==4)bV.push(bY.$0);}bU=[];bV=[];bX(bT);bW=bU.slice(0);return bb.New(bS,bn.Flags(bT),bW,bV.length===0?null:{$:1,$0:function(bY){D.iter(function(bZ){bZ(bY);},bV);}});};bn.Updates=function(bS){return bc.MapTreeReduce(function(bT){return bT.NChanged();},M.Const(),M.Map2Unit,bS.DynNodes);};bn.Empty=function(bS){return bb.New(bS,0,[],null);};bn.EmptyAttr=function(){bu.$cctor();return bu.EmptyAttr;};bn.HasExitAnim=function(bS){var bT;bT=2;return(bS.DynFlags&bT)===bT;};bn.GetExitAnim=function(bS){return bn.GetAnim(bS,function(bT,bU){return bT.NGetExitAnim(bU);});};bn.HasEnterAnim=function(bS){var bT;bT=1;return(bS.DynFlags&bT)===bT;};bn.GetEnterAnim=function(bS){return bn.GetAnim(bS,function(bT,bU){return bT.NGetEnterAnim(bU);});};bn.HasChangeAnim=function(bS){var bT;bT=4;return(bS.DynFlags&bT)===bT;};bn.GetChangeAnim=function(bS){return bn.GetAnim(bS,function(bT,bU){return bT.NGetChangeAnim(bU);});};bn.Flags=function(bS){return bS!==null&&bS.hasOwnProperty("flags")?bS.flags:0;};bn.Static=function(bS){return new N({$:3,$0:bS});};bn.Dynamic=function(bS,bT){return new N({$:1,$0:new bB.New(bS,bT)});};bn.GetAnim=function(bS,bT){return _8.Concat(m.map(function(bU){return bT(bU,bS.DynElem);},bS.DynNodes));};bn.Sync=function(bS,bT){m.iter(function(bU){bU.NSync(bS);},bT.DynNodes);};bn.AppendTree=function(bS,bT){var bU;return bS===null?bT:bT===null?bS:(bU=new N({$:2,$0:bS,$1:bT}),(bn.SetFlags(bU,bn.Flags(bS)|bn.Flags(bT)),bU));};bn.SetFlags=function(bS,bT){bS.flags=bT;};bo.Handler=function(bS,bT){return bn.Static(function(bU){bU.addEventListener(bS,function(bV){return(bT(bU))(bV);},false);});};bo.OnAfterRender=function(bS){return new N({$:4,$0:bS});};bo.Value=function(bS){function bT(bU){return{$:1,$0:bU};}return bo.CustomValue(bS,a.id,function(bU){return bT(a.id(bU));});};bo.Checked=function(bS){function bT(bU,bV){return!w.Equals(bS.Get(),bU.checked)?bS.Set(bU.checked):null;}return N.Concat([bo.DynamicProp("checked",bS.get_View()),bo.Handler("change",function(bU){return function(bV){return bT(bU,bV);};})]);};bo.IntValue=function(bS){return bo.CustomVar(bS,function(bT,bU){var bV;bV=bU.get_Input();return bT.value!==bV?void(bT.value=bV):null;},function(bT){var bU,bV,bW;bU=bT.value;return{$:1,$0:bt.isBlank(bU)?(bT.checkValidity?bT.checkValidity():true)?new O({$:2,$0:bU}):new O({$:1,$0:bU}):(bV=(bW=0,[P.TryParseInt32(bU,{get:function(){return bW;},set:function(bX){bW=bX;}}),bW]),bV[0]?new O({$:0,$0:bV[1],$1:bU}):new O({$:1,$0:bU}))};});};bo.IntValueUnchecked=function(bS){return bo.CustomValue(bS,a.String,function(bT){var bU;return bt.isBlank(bT)?{$:1,$0:0}:(bU=+bT,bU!==bU>>0?null:{$:1,$0:bU});});};bo.FloatValue=function(bS){return bo.CustomVar(bS,function(bT,bU){var bV;bV=bU.get_Input();return bT.value!==bV?void(bT.value=bV):null;},function(bT){var bU,bV;bU=bT.value;return{$:1,$0:bt.isBlank(bU)?(bT.checkValidity?bT.checkValidity():true)?new O({$:2,$0:bU}):new O({$:1,$0:bU}):(bV=+bU,a.isNaN(bV)?new O({$:1,$0:bU}):new O({$:0,$0:bV,$1:bU}))};});};bo.FloatValueUnchecked=function(bS){return bo.CustomValue(bS,a.String,function(bT){var bU;return bt.isBlank(bT)?{$:1,$0:0}:(bU=+bT,a.isNaN(bU)?null:{$:1,$0:bU});});};bo.Dynamic=function(bS,bT){return bn.Dynamic(bT,function(bU){return function(bV){return W.SetAttr(bU,bS,bV);};});};bo.CustomValue=function(bS,bT,bU){return bo.CustomVar(bS,function(bV,bW){bV.value=bT(bW);},function(bV){return bU(bV.value);});};bo.DynamicProp=function(bS,bT){return bn.Dynamic(bT,function(bU){return function(bV){bU[bS]=bV;};});};bo.CustomVar=function(bS,bT,bU){function bV(bX,bY){return bS.UpdateMaybe(function(bZ){var b0,b1;b0=bU(bX);return b0!=null&&b0.$==1&&(!w.Equals(b0.$0,bZ)&&(b1=[b0,b0.$0],true))?b1[0]:null;});}function bW(bX,bY){var bZ,b0;bZ=bU(bX);return bZ!=null&&bZ.$==1&&(w.Equals(bZ.$0,bY)&&(b0=bZ.$0,true))?null:bT(bX,bY);}return N.Concat([bo.Handler("change",function(bX){return function(bY){return bV(bX,bY);};}),bo.Handler("input",function(bX){return function(bY){return bV(bX,bY);};}),bo.Handler("keypress",function(bX){return function(bY){return bV(bX,bY);};}),bo.DynamicCustom(function(bX){return function(bY){return bW(bX,bY);};},bS.get_View())]);};bo.DynamicCustom=function(bS,bT){return bn.Dynamic(bT,bS);};bp=f.Updates=bN.Class({},null,bp);bp.Create=function(bS){var bT;bT=null;bT=bp.New(bS,null,function(){var bU;bU=bT.s;return bU===null?(bU=t.Copy(bT.c()),bT.s=bU,t.WhenObsoleteRun(bU,function(){bT.s=null;}),bU):bU;});return bT;};bp.New=function(bS,bT,bU){return new bp({c:bS,s:bT,v:bU});};bq.$cctor=function(){bq.$cctor=a.ignore;bq.CubicInOut=bv.Custom(function(bS){var bT;bT=bS*bS;return 3*bT-2*(bT*bS);});bq.UseAnimations=true;};br.Delay=function(bS){return function(bT){try{(bS(null))(bT);}catch(bU){bT.k({$:1,$0:bU});}};};br.Bind=function(bS,bT){return br.checkCancel(function(bU){bS(bw.New(function(bV){var bW;if(bV.$==0){bW=bV.$0;br.scheduler().Fork(function(){try{(bT(bW))(bU);}catch(bX){bU.k({$:1,$0:bX});}});}else br.scheduler().Fork(function(){bU.k(bV);});},bU.ct));});};br.Zero=function(){bx.$cctor();return bx.Zero;};br.Start=function(bS,bT){var bU,bV;bU=(bV=(br.defCTS())[0],bT==null?bV:bT.$0);br.scheduler().Fork(function(){if(!bU.c)bS(bw.New(function(bW){if(bW.$==1)br.UncaughtAsyncError(bW.$0);},bU));});};br.Return=function(bS){return function(bT){bT.k({$:0,$0:bS});};};br.checkCancel=function(bS){return function(bT){if(bT.ct.c)br.cancel(bT);else bS(bT);};};br.defCTS=function(){bx.$cctor();return bx.defCTS;};br.UncaughtAsyncError=function(bS){bP.log("WebSharper: Uncaught asynchronous exception",bS);};br.FromContinuations=function(bS){return function(bT){var bU;function bV(bW){if(bU[0])h.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bU[0]=true;br.scheduler().Fork(bW);}}bU=[false];bS(function(bW){bV(function(){bT.k({$:0,$0:bW});});},function(bW){bV(function(){bT.k({$:1,$0:bW});});},function(bW){bV(function(){bT.k({$:2,$0:bW});});});};};br.cancel=function(bS){bS.k({$:2,$0:new bH.New(bS.ct)});};br.scheduler=function(){bx.$cctor();return bx.scheduler;};bs.Append=function(bS,bT){return bS.$==0?bT:bT.$==0?bS:{$:2,$0:bS,$1:bT};};bs.ToArray=function(bS){var bT;function bU(bV){if(bV.$==1)bT.push(bV.$0);else if(bV.$==2){bU(bV.$0);bU(bV.$1);}else if(bV.$==3)m.iter(function(bW){bT.push(bW);},bV.$0);}bT=[];bU(bS);return bT.slice(0);};bs.Concat=function(bS){var bT;bT=bc.ofSeqNonCopying(bS);return bc.TreeReduce(bs.Empty(),bs.Append,bT);};bs.Empty=function(){bJ.$cctor();return bJ.Empty;};bl.head=function(bS){return bS.$==1?bS.$0:bl.listEmpty();};bl.tail=function(bS){return bS.$==1?bS.$1:bl.listEmpty();};bl.listEmpty=function(){return h.FailWith("The input list was empty.");};bt.isBlank=function(bS){return bf.forall(bA.IsWhiteSpace,bS);};bu.$cctor=function(){bu.$cctor=a.ignore;bu.EmptyAttr=null;};bv=f.Easing=bN.Class({},e,bv);bv.Custom=function(bS){return new bv.New(bS);};bv.New=bN.Ctor(function(bS){e.New.call(this);this.transformTime=bS;},bv);bw.New=function(bS,bT){return{k:bS,ct:bT};};bx.$cctor=function(){bx.$cctor=a.ignore;bx.noneCT=by.New(false,[]);bx.scheduler=new bC.New();bx.defCTS=[new bD.New()];bx.Zero=br.Return();bx.GetCT=function(bS){bS.k({$:0,$0:bS.ct});};};by.New=function(bS,bT){return{c:bS,r:bT};};bz.Filter=function(bS,bT){return new B.New$2(m.filter(bS,bz.ToArray(bT)));};bz.Except=function(bS,bT){var bU;bU=new B.New$2(bz.ToArray(bT));bU.ExceptWith(bz.ToArray(bS));return bU;};bz.ToArray=function(bS){var bT;bT=m.create(bS.get_Count(),void 0);bS.CopyTo(bT);return bT;};bz.Intersect=function(bS,bT){var bU;bU=new B.New$2(bz.ToArray(bS));bU.IntersectWith(bz.ToArray(bT));return bU;};bA.IsWhiteSpace=function(bS){return bS.match(new a.RegExp("\\s"))!==null;};P.TryParse=function(bS,bT,bU,bV){var bW,bX;bW=+bS;bX=bW===bW-bW%1&&bW>=bT&&bW<=bU;bX?bV.set(bW):void 0;return bX;};bB=f.DynamicAttrNode=bN.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bS){return _8.get_Empty();},NGetEnterAnim:function(bS){return _8.get_Empty();},NGetChangeAnim:function(bS){return _8.get_Empty();},NSync:function(bS){if(this.dirty){(this.push(bS))(this.value);this.dirty=false;}}},e,bB);bB.New=bN.Ctor(function(bS,bT){var bU;bU=this;e.New.call(this);this.push=bT;this.value=void 0;this.dirty=false;this.updates=M.Map(function(bV){bU.value=bV;bU.dirty=true;},bS);},bB);bC=br.Scheduler=bN.Class({Fork:function(bS){var bT;bT=this;this.robin.push(bS);this.idle?(this.idle=false,a.setTimeout(function(){bT.tick();},0)):void 0;},tick:function(){var bS,bT,bU;bT=this;bU=bR.now();bS=true;while(bS)if(this.robin.length===0){this.idle=true;bS=false;}else{(this.robin.shift())();bR.now()-bU>40?(a.setTimeout(function(){bT.tick();},0),bS=false):void 0;}}},e,bC);bC.New=bN.Ctor(function(){e.New.call(this);this.idle=true;this.robin=[];},bC);bD=d.CancellationTokenSource=bN.Class({},e,bD);bD.New=bN.Ctor(function(){e.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bD);bE.Children=function(bS,bT){var bU,bV,bW;if(bT!=null&&bT.$==1){bW=[];bU=bT.$0[0].nextSibling;while(bU!==bT.$0[1]){bW.push(bU);bU=bU.nextSibling;}return{$:0,$0:bW};}else return{$:0,$0:m.init(bS.childNodes.length,(bV=bS.childNodes,function(bX){return bV[bX];}))};};bE.Except=function(bS,bT){var bU;bU=bS.$0;return{$:0,$0:m.filter(function(bV){return m.forall(function(bW){return!(bV===bW);},bU);},bT.$0)};};bE.Iter=function(bS,bT){m.iter(bS,bT.$0);};bE.DocChildren=function(bS){var bT;function bU(bV){if(bV!=null&&bV.$==2)bU(bV.$0.Current);else if(bV!=null&&bV.$==1)bT.push(bV.$0.El);else if(bV==null);else if(bV!=null&&bV.$==5)bT.push(bV.$0);else if(bV!=null&&bV.$==4)bT.push(bV.$0.Text);else if(bV!=null&&bV.$==6)m.iter(function(bW){if(bW==null||bW.constructor===L)bU(bW);else bT.push(bW);},bV.$0.Els);else{bU(bV.$0);bU(bV.$1);}}bT=[];bU(bS.Children);return{$:0,$0:bc.ofSeqNonCopying(bT)};};bF.Clear=function(bS){bS.splice(0,m.length(bS));};bH=d.OperationCanceledException=bN.Class({},bG,bH);bH.New=bN.Ctor(function(bS){bH.New$1.call(this,"The operation was canceled.",null,bS);},bH);bH.New$1=bN.Ctor(function(bS,bT,bU){this.message=bS;this.inner=bT;L.setPrototypeOf(this,bH.prototype);this.ct=bU;},bH);bI.Create=function(bS){return bL.New(false,bS,bI.forceLazy);};bI.forceLazy=function(){var bS;bS=this.v();this.c=true;this.v=bS;this.f=bI.cachedLazy;return bS;};bI.cachedLazy=function(){return this.v;};bJ.$cctor=function(){bJ.$cctor=a.ignore;bJ.Empty={$:0};};bL.New=function(bS,bT,bU){return{c:bS,v:bT,f:bU};};bN.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
